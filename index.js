(()=>{var t={377:(t,e,i)=>{var s=i(832),n=i(652),r=i(801),o=i(30),a=i(618),h=i(49),c=i(971);c.alea=s,c.xor128=n,c.xorwow=r,c.xorshift7=o,c.xor4096=a,c.tychei=h,t.exports=c},832:function(t,e,i){var s;!function(t,n,r){function o(t){var e=this,i=function(){var t=4022871197,e=function(e){e=String(e);for(var i=0;i<e.length;i++){var s=.02519603282416938*(t+=e.charCodeAt(i));s-=t=s>>>0,t=(s*=t)>>>0,t+=4294967296*(s-=t)}return 2.3283064365386963e-10*(t>>>0)};return e}();e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=i(" "),e.s1=i(" "),e.s2=i(" "),e.s0-=i(t),e.s0<0&&(e.s0+=1),e.s1-=i(t),e.s1<0&&(e.s1+=1),e.s2-=i(t),e.s2<0&&(e.s2+=1),i=null}function a(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function h(t,e){var i=new o(t),s=e&&e.state,n=i.next;return n.int32=function(){return 4294967296*i.next()|0},n.double=function(){return n()+11102230246251565e-32*(2097152*n()|0)},n.quick=n,s&&("object"==typeof s&&a(s,i),n.state=function(){return a(i,{})}),n}n&&n.exports?n.exports=h:i.amdD&&i.amdO?void 0===(s=function(){return h}.call(e,i,e,n))||(n.exports=s):this.alea=h}(0,t=i.nmd(t),i.amdD)},49:function(t,e,i){var s;!function(t,n,r){function o(t){var e=this,i="";e.next=function(){var t=e.b,i=e.c,s=e.d,n=e.a;return t=t<<25^t>>>7^i,i=i-s|0,s=s<<24^s>>>8^n,n=n-t|0,e.b=t=t<<20^t>>>12^i,e.c=i=i-s|0,e.d=s<<16^i>>>16^n,e.a=n-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):i+=t;for(var s=0;s<i.length+20;s++)e.b^=0|i.charCodeAt(s),e.next()}function a(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function h(t,e){var i=new o(t),s=e&&e.state,n=function(){return(i.next()>>>0)/4294967296};return n.double=function(){do{var t=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},n.int32=i.next,n.quick=n,s&&("object"==typeof s&&a(s,i),n.state=function(){return a(i,{})}),n}n&&n.exports?n.exports=h:i.amdD&&i.amdO?void 0===(s=function(){return h}.call(e,i,e,n))||(n.exports=s):this.tychei=h}(0,t=i.nmd(t),i.amdD)},652:function(t,e,i){var s;!function(t,n,r){function o(t){var e=this,i="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:i+=t;for(var s=0;s<i.length+64;s++)e.x^=0|i.charCodeAt(s),e.next()}function a(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function h(t,e){var i=new o(t),s=e&&e.state,n=function(){return(i.next()>>>0)/4294967296};return n.double=function(){do{var t=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},n.int32=i.next,n.quick=n,s&&("object"==typeof s&&a(s,i),n.state=function(){return a(i,{})}),n}n&&n.exports?n.exports=h:i.amdD&&i.amdO?void 0===(s=function(){return h}.call(e,i,e,n))||(n.exports=s):this.xor128=h}(0,t=i.nmd(t),i.amdD)},618:function(t,e,i){var s;!function(t,n,r){function o(t){var e=this;e.next=function(){var t,i,s=e.w,n=e.X,r=e.i;return e.w=s=s+1640531527|0,i=n[r+34&127],t=n[r=r+1&127],i^=i<<13,t^=t<<17,i^=i>>>15,t^=t>>>12,i=n[r]=i^t,e.i=r,i+(s^s>>>16)|0},function(t,e){var i,s,n,r,o,a=[],h=128;for(e===(0|e)?(s=e,e=null):(e+="\0",s=0,h=Math.max(h,e.length)),n=0,r=-32;r<h;++r)e&&(s^=e.charCodeAt((r+32)%e.length)),0===r&&(o=s),s^=s<<10,s^=s>>>15,s^=s<<4,s^=s>>>13,r>=0&&(o=o+1640531527|0,n=0==(i=a[127&r]^=s+o)?n+1:0);for(n>=128&&(a[127&(e&&e.length||0)]=-1),n=127,r=512;r>0;--r)s=a[n+34&127],i=a[n=n+1&127],s^=s<<13,i^=i<<17,s^=s>>>15,i^=i>>>12,a[n]=s^i;t.w=o,t.X=a,t.i=n}(e,t)}function a(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function h(t,e){null==t&&(t=+new Date);var i=new o(t),s=e&&e.state,n=function(){return(i.next()>>>0)/4294967296};return n.double=function(){do{var t=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},n.int32=i.next,n.quick=n,s&&(s.X&&a(s,i),n.state=function(){return a(i,{})}),n}n&&n.exports?n.exports=h:i.amdD&&i.amdO?void 0===(s=function(){return h}.call(e,i,e,n))||(n.exports=s):this.xor4096=h}(0,t=i.nmd(t),i.amdD)},30:function(t,e,i){var s;!function(t,n,r){function o(t){var e=this;e.next=function(){var t,i,s=e.x,n=e.i;return t=s[n],i=(t^=t>>>7)^t<<24,i^=(t=s[n+1&7])^t>>>10,i^=(t=s[n+3&7])^t>>>3,i^=(t=s[n+4&7])^t<<7,t=s[n+7&7],i^=(t^=t<<13)^t<<9,s[n]=i,e.i=n+1&7,i},function(t,e){var i,s=[];if(e===(0|e))s[0]=e;else for(e=""+e,i=0;i<e.length;++i)s[7&i]=s[7&i]<<15^e.charCodeAt(i)+s[i+1&7]<<13;for(;s.length<8;)s.push(0);for(i=0;i<8&&0===s[i];++i);for(8==i?s[7]=-1:s[i],t.x=s,t.i=0,i=256;i>0;--i)t.next()}(e,t)}function a(t,e){return e.x=t.x.slice(),e.i=t.i,e}function h(t,e){null==t&&(t=+new Date);var i=new o(t),s=e&&e.state,n=function(){return(i.next()>>>0)/4294967296};return n.double=function(){do{var t=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},n.int32=i.next,n.quick=n,s&&(s.x&&a(s,i),n.state=function(){return a(i,{})}),n}n&&n.exports?n.exports=h:i.amdD&&i.amdO?void 0===(s=function(){return h}.call(e,i,e,n))||(n.exports=s):this.xorshift7=h}(0,t=i.nmd(t),i.amdD)},801:function(t,e,i){var s;!function(t,n,r){function o(t){var e=this,i="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:i+=t;for(var s=0;s<i.length+64;s++)e.x^=0|i.charCodeAt(s),s==i.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function a(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function h(t,e){var i=new o(t),s=e&&e.state,n=function(){return(i.next()>>>0)/4294967296};return n.double=function(){do{var t=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},n.int32=i.next,n.quick=n,s&&("object"==typeof s&&a(s,i),n.state=function(){return a(i,{})}),n}n&&n.exports?n.exports=h:i.amdD&&i.amdO?void 0===(s=function(){return h}.call(e,i,e,n))||(n.exports=s):this.xorwow=h}(0,t=i.nmd(t),i.amdD)},971:function(t,e,i){var s;!function(n,r,o){var a,h=256,c=6,l="random",d=o.pow(h,c),u=o.pow(2,52),p=2*u,y=h-1;function x(t,e,i){var s=[],y=g(v((e=1==e?{entropy:!0}:e||{}).entropy?[t,w(r)]:null==t?function(){try{var t;return a&&(t=a.randomBytes)?t=t(h):(t=new Uint8Array(h),(n.crypto||n.msCrypto).getRandomValues(t)),w(t)}catch(t){var e=n.navigator,i=e&&e.plugins;return[+new Date,n,i,n.screen,w(r)]}}():t,3),s),x=new f(s),M=function(){for(var t=x.g(c),e=d,i=0;t<u;)t=(t+i)*h,e*=h,i=x.g(1);for(;t>=p;)t/=2,e/=2,i>>>=1;return(t+i)/e};return M.int32=function(){return 0|x.g(4)},M.quick=function(){return x.g(4)/4294967296},M.double=M,g(w(x.S),r),(e.pass||i||function(t,e,i,s){return s&&(s.S&&m(s,x),t.state=function(){return m(x,{})}),i?(o[l]=t,e):t})(M,y,"global"in e?e.global:this==o,e.state)}function f(t){var e,i=t.length,s=this,n=0,r=s.i=s.j=0,o=s.S=[];for(i||(t=[i++]);n<h;)o[n]=n++;for(n=0;n<h;n++)o[n]=o[r=y&r+t[n%i]+(e=o[n])],o[r]=e;(s.g=function(t){for(var e,i=0,n=s.i,r=s.j,o=s.S;t--;)e=o[n=y&n+1],i=i*h+o[y&(o[n]=o[r=y&r+e])+(o[r]=e)];return s.i=n,s.j=r,i})(h)}function m(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function v(t,e){var i,s=[],n=typeof t;if(e&&"object"==n)for(i in t)try{s.push(v(t[i],e-1))}catch(t){}return s.length?s:"string"==n?t:t+"\0"}function g(t,e){for(var i,s=t+"",n=0;n<s.length;)e[y&n]=y&(i^=19*e[y&n])+s.charCodeAt(n++);return w(e)}function w(t){return String.fromCharCode.apply(0,t)}if(g(o.random(),r),t.exports){t.exports=x;try{a=i(42)}catch(t){}}else void 0===(s=function(){return x}.call(e,i,e,t))||(t.exports=s)}("undefined"!=typeof self?self:this,[],Math)},42:()=>{}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={id:s,loaded:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}i.amdD=function(){throw new Error("define cannot be used indirect")},i.amdO={},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t=i(377),e=i.n(t);const s=function(t,i,s){const n=e()(s||window.crypto.getRandomValues(new Uint32Array(1))[0].toString()),r=[],o=[],a=t=>{if(t.width<20||t.height<20)r.push(t);else{const{leftRoom:e,rightRoom:i,line:s}=function(t,e){const i=e()<.5,s={x:Math.floor(t.x+t.width*e()),y:Math.floor(t.y+t.height*e())},n={x:t.x,y:t.y,width:i?s.x-t.x:t.width,height:i?t.height:s.y-t.y},r={x:i?s.x:t.x,y:i?t.y:s.y,width:i?t.x+t.width-s.x:t.width,height:i?t.height:t.y+t.height-s.y},o={start:{x:s.x,y:s.y},end:{x:i?s.x:s.x+1,y:i?s.y+1:s.y}};return{leftRoom:n,rightRoom:r,line:o}}(t,n);a(e),a(i),r.push(e,i),o.push(s)}};a({x:0,y:0,width:t,height:i});const h=Array(i).fill().map((()=>Array(t).fill(1)));return r.forEach((t=>{for(let e=t.y+1;e<t.y+t.height-1;e++)for(let i=t.x+1;i<t.x+t.width-1;i++)h[e][i]=0;const e=Math.floor(t.x+t.width/2),i=Math.floor(t.y+t.height/2);h[i][e]=2})),o.forEach((t=>{const{start:e,end:i}=t;if(e.x===i.x)for(let t=e.y;t<i.y;t++)h[t][e.x]=1;else for(let t=e.x;t<i.x;t++)h[e.y][t]=1})),h}(50,50,"seed");console.log(s);const n=[{id:0,name:"First level",map:s}];class r{constructor(t){this.id=t,this.pos={x:0,y:0},this.speed=0,this.moveSpeed=0,this.rotation=0,this.direction={x:0,y:0},this.rotationSpeed=0}}class o extends r{constructor(t){super(t),this.isStrafing=!1,this.id=t,this.pos={x:16,y:10},this.speed=0,this.moveSpeed=.005,this.rotation=0,this.direction={x:0,y:0},this.rotationSpeed=1*Math.PI/360}}class a{constructor(t,e){this._canvas=document.createElement("canvas"),this._canvas.width=t,this._canvas.height=e,this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0",this._canvas.id="hud",this._ctx=this._canvas.getContext("2d"),this.renderCrosshair()}get canvas(){return this._canvas}get ctx(){return this._ctx}renderCrosshair(){this._ctx.beginPath(),this._ctx.moveTo(this.canvas.width/2,this._canvas.height/2),this._ctx.lineTo(this._canvas.width/2+10,this._canvas.height/2),this._ctx.moveTo(this._canvas.width/2,this._canvas.height/2),this._ctx.lineTo(this._canvas.width/2-10,this._canvas.height/2),this._ctx.moveTo(this._canvas.width/2,this._canvas.height/2),this._ctx.lineTo(this._canvas.width/2,this._canvas.height/2+10),this._ctx.moveTo(this._canvas.width/2,this._canvas.height/2),this._ctx.lineTo(this._canvas.width/2,this._canvas.height/2-10),this._ctx.strokeStyle="red",this._ctx.stroke()}}class h{constructor(){this.stripWidth=2,this.screenStrips=[],this.screen=document.createElement("div"),this.width=320,this.height=200,this.screen.id="screen",this.skybox=document.createElement("div"),document.body.prepend(this.screen),this.init()}onResize(){const t=this.width/this.height,e=window.innerWidth,i=e/t;this.screen.style.width=e+"px",this.screen.style.height=i+"px"}init(){document.body.style.cursor="none";const t=new a(this.width,this.height),e=document.createElement("div");e.id="floor",this.skybox.id="ceiling";const i=document.createElement("div");i.id="level";const s=document.createElement("div");s.id="hand",this.screen.appendChild(e),this.screen.appendChild(this.skybox),this.screen.appendChild(i),this.screen.appendChild(s),this.screen.appendChild(t.canvas);for(let t=0;t<this.width;t+=this.stripWidth){const e=document.createElement("div");e.style.position="absolute",e.style.left=t+"px",e.style.width=this.stripWidth+"px",e.style.height="0px",e.style.overflow="hidden",e.style.backgroundColor="magenta";const s=new Image;s.src="public/textures.png",s.style.position="absolute",s.style.left="0px",e.appendChild(s),e.img=s,this.screenStrips.push(e),i.appendChild(e)}}drawRay(){}castSingleRay(){}drawMiniMap(){}updateMiniMap(){}}const c=class{constructor(t){this.keysPressed={},this.game=t,this.enablePointerLock(),this.init()}isKeyPressed(t){return this.keysPressed[t]}onKeydown(t){switch(t.code){case"KeyW":case"KeyS":case"KeyA":case"KeyD":case"ShiftLeft":this.keysPressed[t.code]=!0}}onKeyup(t){switch(console.log(t),t.code){case"KeyW":this.keysPressed[t.code]=!1;case"KeyS":this.keysPressed[t.code]=!1;break;case"KeyA":this.keysPressed[t.code]=!1;case"KeyD":case"ShiftLeft":this.keysPressed[t.code]=!1}}enablePointerLock(){document.addEventListener("click",(()=>{document.body.requestPointerLock()})),document.addEventListener("mousemove",this.onMouseMove.bind(this))}onMouseMove(t){const e=t.movementX*this.game.player.rotationSpeed;this.game.player.rotation+=e}init(){console.log("Controller initialized"),window.addEventListener("keydown",this.onKeydown.bind(this)),window.addEventListener("keyup",this.onKeyup.bind(this)),window.addEventListener("mousemove",this.onMouseMove.bind(this))}update(t){this.isKeyPressed("KeyW")&&(this.game.player.speed=1,this.game.player.direction.y=-1),this.isKeyPressed("KeyS")&&(this.game.player.speed=-1,this.game.player.direction.y=1),this.isKeyPressed("KeyA")&&(this.game.player.direction.x=1,this.game.player.speed=-1),this.isKeyPressed("KeyD")&&(this.game.player.direction.x=-1,this.game.player.speed=1),this.isKeyPressed("ShiftLeft")&&(this.game.player.speed*=2),this.isKeyPressed("Space")&&(this.game.player.speed=0,this.game.player.direction.y=0,this.game.player.direction.x=0),this.isKeyPressed("KeyW")||this.isKeyPressed("KeyS")||(this.game.player.direction.y=0),this.isKeyPressed("KeyA")||this.isKeyPressed("KeyD")||(this.game.player.direction.x=0),this.isKeyPressed("ShiftLeft")||(this.game.player.speed/=2)}};class l{constructor(){}async loadAssets(t){const e={};for(const i of t){const t=await this.loadAsset(i);e[i]=t}return e}async loadAsset(t){const e=t.split(".").pop();switch(e){case"png":return await this.loadImage(t);case"txt":return await this.loadText(t);case"json":return await this.loadJSON(t);default:throw new Error(`Unknown asset type: ${e}`)}}async loadImage(t){return new Promise(((e,i)=>{const s=new Image;s.src=t,s.onload=()=>e(s),s.onerror=i}))}async loadText(t){return new Promise(((e,i)=>{e(fetch(t).then((t=>t.text())))}))}async loadJSON(t){return new Promise(((e,i)=>{e(fetch(t).then((t=>t.json())))}))}}var d;!function(t){t[t.Playing=0]="Playing",t[t.GameOver=1]="GameOver",t[t.Paused=2]="Paused",t[t.Inventory=3]="Inventory",t[t.Trading=4]="Trading",t[t.MainMenu=5]="MainMenu"}(d||(d={}));const u=document.querySelector("#miniMap"),p=document.querySelector("#miniMapObjects");let y=0;const x=60*Math.PI/180/1.5,f=Math.ceil(160),m=160/Math.tan(x),v=2*Math.PI;let g=[],w=0,M=[],b=[],k=[];const P=document.querySelector("#debugScreen");const S=new class{constructor(){this.state="mainmenu",this.mapWidth=0,this.mapHeight=0,this.dayTime=0,this.drawMiniMap=()=>{u.width=4*this.mapWidth,u.height=4*this.mapHeight,u.style.width=4*this.mapWidth+"px";const t=u.getContext("2d");for(let e=0;e<this.mapHeight;e++)for(let i=0;i<this.mapWidth;i++)this.level.map[e][i]>0&&(t.fillStyle="black",t.fillRect(4*i,4*e,4,4))},this.updateMiniMap=()=>{p.width=4*this.mapWidth,p.height=4*this.mapHeight;const t=p.getContext("2d");t.clearRect(0,0,u.width,u.height),t.fillStyle="yellowgreen",t.fillRect(4*this.player.pos.x-2,4*this.player.pos.y-2,4,4),t.beginPath(),t.moveTo(4*this.player.pos.x,4*this.player.pos.y),t.lineTo(4*(this.player.pos.x+4*Math.cos(this.player.rotation)),4*(this.player.pos.y+4*Math.sin(this.player.rotation))),t.closePath(),t.stroke()},this.assetLoader=new l,this.player=new o("player"),this.renderer=new h,this.controller=new c(this),this.state="mainmenu",this.level=n[0],this.assetLoader.loadAssets(["public/textures.png"]).then((t=>{this.setup(t)}))}initSprites(){M=[];for(var t=0;t<this.level.map.length;t++)M[t]=[];for(var e=0;e<b.length;e++){var i=b[e],s=k[i.type],n=document.createElement("img");n.src=s.img,n.style.display="none",n.style.position="absolute",i.visible=!1,i.block=s.block,i.img=n,M[i.y][i.x]=i,this.renderer.screen.appendChild(n)}}isBlocking(t,e){if(e<0||e>=this.mapHeight||t<0||t>=this.mapWidth)return!0;var i=Math.floor(t),s=Math.floor(e);return 0!=this.level.map[s][i]||!(!M[s][i]||!M[s][i].block)}checkCollision(t,e,i,s,n){var r={x:t,y:e};if(s<0||s>=this.mapHeight||i<0||i>=this.mapWidth)return r;var o=Math.floor(i),a=Math.floor(s);if(this.isBlocking(o,a))return r;r.x=i,r.y=s;var h,c,l=this.isBlocking(o,a-1),d=this.isBlocking(o,a+1),u=this.isBlocking(o-1,a),p=this.isBlocking(o+1,a);(l&&s-a<n&&(s=r.y=a+n),d&&a+1-s<n&&(s=r.y=a+1-n),u&&i-o<n&&(i=r.x=o+n),p&&o+1-i<n&&(i=r.x=o+1-n),!this.isBlocking(o-1,a-1)||l&&u)||(h=i-o)*h+(c=s-a)*c<n*n&&(h*h>c*c?i=r.x=o+n:s=r.y=a+n);!this.isBlocking(o+1,a-1)||l&&p||(h=i-(o+1))*h+(c=s-a)*c<n*n&&(h*h>c*c?i=r.x=o+1-n:s=r.y=a+n);!this.isBlocking(o-1,a+1)||d&&d||(h=i-o)*h+(c=s-(a+1))*c<n*n&&(h*h>c*c?i=r.x=o+n:s=r.y=a+1-n);!this.isBlocking(o+1,a+1)||d&&p||(h=i-(o+1))*h+(c=s-(a+1))*c<n*n&&(h*h>c*c?i=r.x=o+1-n:s=r.y=a+1-n);return r}castRays(){let t=0;for(let e=0;e<f;e++){const i=2*(-f/2+e),s=Math.sqrt(i*i+m*m),n=Math.asin(i/s);this.castSingleRay(this.player.rotation+n,t++)}}castSingleRay(t,e){(t%=v)<0&&(t+=v);var i=t>.75*v||t<.25*v,s=t<0||t>Math.PI,n=0,r=Math.sin(t),o=Math.cos(t),a=0;let h=0,c=0;var l=0;for(var d=i?1:-1,u=d*(w=r/o),p=i?Math.ceil(this.player.pos.x):Math.floor(this.player.pos.x),y=this.player.pos.y+(p-this.player.pos.x)*w;p>=0&&p<this.mapWidth&&y>=0&&y<this.mapHeight;){var x=p+(i?0:-1),f=y>>0;try{M[f][x]&&!M[f][x].visible&&(M[f][x].visible=!0,g.push(M[f][x]))}catch(t){}if(this.level.map[f][x]>0){let t=p-this.player.pos.x,e=y-this.player.pos.y;a=t*t+e*e,n=this.level.map[f][x],l=y%1,i||(l=1-l),p,y,h=x,c=f,!0;break}p+=d,y+=u}var w,b=s?-1:1,k=b*(w=o/r);for(y=s?Math.floor(this.player.pos.y):Math.ceil(this.player.pos.y),p=this.player.pos.x+(y-this.player.pos.y)*w;p>=0&&p<this.mapWidth&&y>=0&&y<this.mapHeight;){f=Math.floor(y+(s?-1:0)),x=p>>0;try{M[f][x]&&!M[f][x].visible&&(M[f][x].visible=!0,g.push(M[f][x]))}catch(t){}if(this.level.map[f][x]>0){var P=p-this.player.pos.x,S=y-this.player.pos.y,_=P*P+S*S;(!a||_<a)&&(a=_,p,y,c=f,h=x,n=this.level.map[f][x],l=p%1,s&&(l=1-l));break}p+=k,y+=b}if(a){var K=this.renderer.screenStrips[e];a=Math.sqrt(a),a*=Math.cos(this.player.rotation-t);var C=Math.round(m/a),T=2*C,A=Math.round((200-C)/2);let i=C;K.style.height=i+"px",K.style.top=A+"px",K.img.style.height=Math.floor(64*C/2)+"px",K.img.style.width=Math.floor(64*T/2)+"px",K.img.style.top=-Math.floor(C*(n-1))+"px";var D=Math.round(l*T);D>T-2&&(D=T-2),K.img.style.left=-D+"px"}}setup(t){this.mapWidth=this.level.map[0].length,this.mapHeight=this.level.map.length,this.initSprites(),console.log(t),this.drawMiniMap(),document.body.style.imageRendering="pixelated",this.loop(0)}movePlayer(t,e){const i=t.moveSpeed*t.speed;let s=t.pos.x+Math.cos(t.rotation)*i*-e,n=t.pos.y+Math.sin(t.rotation)*i*-e;0!==t.direction.x&&(s=t.pos.x+Math.cos(t.rotation+Math.PI/2)*i*-e,n=t.pos.y+Math.sin(t.rotation+Math.PI/2)*i*-e);const r=this.checkCollision(t.pos.x,t.pos.y,s,n,.35);t.pos.x=r.x,t.pos.y=r.y,t.rotation<0&&(t.rotation+=2*Math.PI),t.rotation>=2*Math.PI&&(t.rotation-=2*Math.PI)}render(){this.dayTime<12?this.renderer.skybox.style.backgroundColor=`rgba(${99/(12/this.dayTime)}, \n    ${155/(12/this.dayTime)},\n    ${255/(12/this.dayTime)}\n    , 1)`:this.renderer.skybox.style.backgroundColor=`rgba(${99/(12/(24-this.dayTime))}, \n      ${155/(12/(24-this.dayTime))},\n      ${255/(12/(24-this.dayTime))}\n      , 1)`}update(t){this.controller.update(t),this.movePlayer(this.player,t),this.updateMiniMap(),this.castRays(),w+=-t,w>100&&(this.dayTime+=.01,this.dayTime>23&&(this.dayTime=0),w=0),P.innerText=`\n      PLAYER X: ${this.player.pos.x}\n      PLAYER Y: ${this.player.pos.y}\n      PLAYER ANGLE: ${this.player.rotation}\n      DT: ${t}\n    `}loop(t){const e=y-t;y=t,this.update(e),this.render(),requestAnimationFrame(this.loop.bind(this))}};window.game=S})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBWTJFLFVBQVkscUJBQ2RqVixLQUFLNE4sT0FBT2xFLElBQUl2SCxzQkFDaEJuQyxLQUFLNE4sT0FBT2xFLElBQUl0SCwwQkFDWnBDLEtBQUs0TixPQUFPL0QsdUJBQ3RCaUUsU0FFUixDQUNBNEcsS0FBS1EsR0FDRCxNQUFNcEgsRUFBSzJCLEVBQVd5RixFQUN0QnpGLEVBQVd5RixFQUNYbFYsS0FBSzZOLE9BQU9DLEdBQ1o5TixLQUFLZ1YsU0FDTEcsc0JBQXNCblYsS0FBSzBVLEtBQUtqSCxLQUFLek4sTUFDekMsR0MvWUpnSSxPQUFPK0UsS0FBT0EsQyIsInNvdXJjZXMiOlsid2VicGFjazovL21pbmVjcmFmdDI1ZC8uL25vZGVfbW9kdWxlcy9zZWVkcmFuZG9tL2luZGV4LmpzIiwid2VicGFjazovL21pbmVjcmFmdDI1ZC8uL25vZGVfbW9kdWxlcy9zZWVkcmFuZG9tL2xpYi9hbGVhLmpzIiwid2VicGFjazovL21pbmVjcmFmdDI1ZC8uL25vZGVfbW9kdWxlcy9zZWVkcmFuZG9tL2xpYi90eWNoZWkuanMiLCJ3ZWJwYWNrOi8vbWluZWNyYWZ0MjVkLy4vbm9kZV9tb2R1bGVzL3NlZWRyYW5kb20vbGliL3hvcjEyOC5qcyIsIndlYnBhY2s6Ly9taW5lY3JhZnQyNWQvLi9ub2RlX21vZHVsZXMvc2VlZHJhbmRvbS9saWIveG9yNDA5Ni5qcyIsIndlYnBhY2s6Ly9taW5lY3JhZnQyNWQvLi9ub2RlX21vZHVsZXMvc2VlZHJhbmRvbS9saWIveG9yc2hpZnQ3LmpzIiwid2VicGFjazovL21pbmVjcmFmdDI1ZC8uL25vZGVfbW9kdWxlcy9zZWVkcmFuZG9tL2xpYi94b3J3b3cuanMiLCJ3ZWJwYWNrOi8vbWluZWNyYWZ0MjVkLy4vbm9kZV9tb2R1bGVzL3NlZWRyYW5kb20vc2VlZHJhbmRvbS5qcyIsIndlYnBhY2s6Ly9taW5lY3JhZnQyNWQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vbWluZWNyYWZ0MjVkL3dlYnBhY2svcnVudGltZS9hbWQgZGVmaW5lIiwid2VicGFjazovL21pbmVjcmFmdDI1ZC93ZWJwYWNrL3J1bnRpbWUvYW1kIG9wdGlvbnMiLCJ3ZWJwYWNrOi8vbWluZWNyYWZ0MjVkL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL21pbmVjcmFmdDI1ZC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vbWluZWNyYWZ0MjVkL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vbWluZWNyYWZ0MjVkL3dlYnBhY2svcnVudGltZS9ub2RlIG1vZHVsZSBkZWNvcmF0b3IiLCJ3ZWJwYWNrOi8vbWluZWNyYWZ0MjVkLy4vc3JjL2xldmVscy5qcyIsIndlYnBhY2s6Ly9taW5lY3JhZnQyNWQvLi9zcmMvcGVyc29uLnRzIiwid2VicGFjazovL21pbmVjcmFmdDI1ZC8uL3NyYy9wbGF5ZXIudHMiLCJ3ZWJwYWNrOi8vbWluZWNyYWZ0MjVkLy4vc3JjL3JlbmRlcmVyLnRzIiwid2VicGFjazovL21pbmVjcmFmdDI1ZC8uL3NyYy9jb250cm9sbGVyLnRzIiwid2VicGFjazovL21pbmVjcmFmdDI1ZC8uL3NyYy9hc3NldC1sb2FkZXIudHMiLCJ3ZWJwYWNrOi8vbWluZWNyYWZ0MjVkLy4vc3JjL2dhbWUudHMiLCJ3ZWJwYWNrOi8vbWluZWNyYWZ0MjVkLy4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEEgbGlicmFyeSBvZiBzZWVkYWJsZSBSTkdzIGltcGxlbWVudGVkIGluIEphdmFzY3JpcHQuXG4vL1xuLy8gVXNhZ2U6XG4vL1xuLy8gdmFyIHNlZWRyYW5kb20gPSByZXF1aXJlKCdzZWVkcmFuZG9tJyk7XG4vLyB2YXIgcmFuZG9tID0gc2VlZHJhbmRvbSgxKTsgLy8gb3IgYW55IHNlZWQuXG4vLyB2YXIgeCA9IHJhbmRvbSgpOyAgICAgICAvLyAwIDw9IHggPCAxLiAgRXZlcnkgYml0IGlzIHJhbmRvbS5cbi8vIHZhciB4ID0gcmFuZG9tLnF1aWNrKCk7IC8vIDAgPD0geCA8IDEuICAzMiBiaXRzIG9mIHJhbmRvbW5lc3MuXG5cbi8vIGFsZWEsIGEgNTMtYml0IG11bHRpcGx5LXdpdGgtY2FycnkgZ2VuZXJhdG9yIGJ5IEpvaGFubmVzIEJhYWfDuGUuXG4vLyBQZXJpb2Q6IH4yXjExNlxuLy8gUmVwb3J0ZWQgdG8gcGFzcyBhbGwgQmlnQ3J1c2ggdGVzdHMuXG52YXIgYWxlYSA9IHJlcXVpcmUoJy4vbGliL2FsZWEnKTtcblxuLy8geG9yMTI4LCBhIHB1cmUgeG9yLXNoaWZ0IGdlbmVyYXRvciBieSBHZW9yZ2UgTWFyc2FnbGlhLlxuLy8gUGVyaW9kOiAyXjEyOC0xLlxuLy8gUmVwb3J0ZWQgdG8gZmFpbDogTWF0cml4UmFuayBhbmQgTGluZWFyQ29tcC5cbnZhciB4b3IxMjggPSByZXF1aXJlKCcuL2xpYi94b3IxMjgnKTtcblxuLy8geG9yd293LCBHZW9yZ2UgTWFyc2FnbGlhJ3MgMTYwLWJpdCB4b3Itc2hpZnQgY29tYmluZWQgcGx1cyB3ZXlsLlxuLy8gUGVyaW9kOiAyXjE5Mi0yXjMyXG4vLyBSZXBvcnRlZCB0byBmYWlsOiBDb2xsaXNpb25PdmVyLCBTaW1wUG9rZXIsIGFuZCBMaW5lYXJDb21wLlxudmFyIHhvcndvdyA9IHJlcXVpcmUoJy4vbGliL3hvcndvdycpO1xuXG4vLyB4b3JzaGlmdDcsIGJ5IEZyYW7Dp29pcyBQYW5uZXRvbiBhbmQgUGllcnJlIEwnZWN1eWVyLCB0YWtlc1xuLy8gYSBkaWZmZXJlbnQgYXBwcm9hY2g6IGl0IGFkZHMgcm9idXN0bmVzcyBieSBhbGxvd2luZyBtb3JlIHNoaWZ0c1xuLy8gdGhhbiBNYXJzYWdsaWEncyBvcmlnaW5hbCB0aHJlZS4gIEl0IGlzIGEgNy1zaGlmdCBnZW5lcmF0b3Jcbi8vIHdpdGggMjU2IGJpdHMsIHRoYXQgcGFzc2VzIEJpZ0NydXNoIHdpdGggbm8gc3lzdG1hdGljIGZhaWx1cmVzLlxuLy8gUGVyaW9kIDJeMjU2LTEuXG4vLyBObyBzeXN0ZW1hdGljIEJpZ0NydXNoIGZhaWx1cmVzIHJlcG9ydGVkLlxudmFyIHhvcnNoaWZ0NyA9IHJlcXVpcmUoJy4vbGliL3hvcnNoaWZ0NycpO1xuXG4vLyB4b3I0MDk2LCBieSBSaWNoYXJkIEJyZW50LCBpcyBhIDQwOTYtYml0IHhvci1zaGlmdCB3aXRoIGFcbi8vIHZlcnkgbG9uZyBwZXJpb2QgdGhhdCBhbHNvIGFkZHMgYSBXZXlsIGdlbmVyYXRvci4gSXQgYWxzbyBwYXNzZXNcbi8vIEJpZ0NydXNoIHdpdGggbm8gc3lzdGVtYXRpYyBmYWlsdXJlcy4gIEl0cyBsb25nIHBlcmlvZCBtYXlcbi8vIGJlIHVzZWZ1bCBpZiB5b3UgaGF2ZSBtYW55IGdlbmVyYXRvcnMgYW5kIG5lZWQgdG8gYXZvaWRcbi8vIGNvbGxpc2lvbnMuXG4vLyBQZXJpb2Q6IDJeNDEyOC0yXjMyLlxuLy8gTm8gc3lzdGVtYXRpYyBCaWdDcnVzaCBmYWlsdXJlcyByZXBvcnRlZC5cbnZhciB4b3I0MDk2ID0gcmVxdWlyZSgnLi9saWIveG9yNDA5NicpO1xuXG4vLyBUeWNoZS1pLCBieSBTYW11ZWwgTmV2ZXMgYW5kIEZpbGlwZSBBcmF1am8sIGlzIGEgYml0LXNoaWZ0aW5nIHJhbmRvbVxuLy8gbnVtYmVyIGdlbmVyYXRvciBkZXJpdmVkIGZyb20gQ2hhQ2hhLCBhIG1vZGVybiBzdHJlYW0gY2lwaGVyLlxuLy8gaHR0cHM6Ly9lZGVuLmRlaS51Yy5wdC9+c25ldmVzL3B1YnMvMjAxMS1zbmZhMi5wZGZcbi8vIFBlcmlvZDogfjJeMTI3XG4vLyBObyBzeXN0ZW1hdGljIEJpZ0NydXNoIGZhaWx1cmVzIHJlcG9ydGVkLlxudmFyIHR5Y2hlaSA9IHJlcXVpcmUoJy4vbGliL3R5Y2hlaScpO1xuXG4vLyBUaGUgb3JpZ2luYWwgQVJDNC1iYXNlZCBwcm5nIGluY2x1ZGVkIGluIHRoaXMgbGlicmFyeS5cbi8vIFBlcmlvZDogfjJeMTYwMFxudmFyIHNyID0gcmVxdWlyZSgnLi9zZWVkcmFuZG9tJyk7XG5cbnNyLmFsZWEgPSBhbGVhO1xuc3IueG9yMTI4ID0geG9yMTI4O1xuc3IueG9yd293ID0geG9yd293O1xuc3IueG9yc2hpZnQ3ID0geG9yc2hpZnQ3O1xuc3IueG9yNDA5NiA9IHhvcjQwOTY7XG5zci50eWNoZWkgPSB0eWNoZWk7XG5cbm1vZHVsZS5leHBvcnRzID0gc3I7XG4iLCIvLyBBIHBvcnQgb2YgYW4gYWxnb3JpdGhtIGJ5IEpvaGFubmVzIEJhYWfDuGUgPGJhYWdvZUBiYWFnb2UuY29tPiwgMjAxMFxuLy8gaHR0cDovL2JhYWdvZS5jb20vZW4vUmFuZG9tTXVzaW5ncy9qYXZhc2NyaXB0L1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL25xdWlubGFuL2JldHRlci1yYW5kb20tbnVtYmVycy1mb3ItamF2YXNjcmlwdC1taXJyb3Jcbi8vIE9yaWdpbmFsIHdvcmsgaXMgdW5kZXIgTUlUIGxpY2Vuc2UgLVxuXG4vLyBDb3B5cmlnaHQgKEMpIDIwMTAgYnkgSm9oYW5uZXMgQmFhZ8O4ZSA8YmFhZ29lQGJhYWdvZS5vcmc+XG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuLy8gaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuLy8gdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuLy8gY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4vLyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4vLyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4vLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbi8vIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuLy8gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuLy8gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbi8vIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbi8vIFRIRSBTT0ZUV0FSRS5cblxuXG5cbihmdW5jdGlvbihnbG9iYWwsIG1vZHVsZSwgZGVmaW5lKSB7XG5cbmZ1bmN0aW9uIEFsZWEoc2VlZCkge1xuICB2YXIgbWUgPSB0aGlzLCBtYXNoID0gTWFzaCgpO1xuXG4gIG1lLm5leHQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdCA9IDIwOTE2MzkgKiBtZS5zMCArIG1lLmMgKiAyLjMyODMwNjQzNjUzODY5NjNlLTEwOyAvLyAyXi0zMlxuICAgIG1lLnMwID0gbWUuczE7XG4gICAgbWUuczEgPSBtZS5zMjtcbiAgICByZXR1cm4gbWUuczIgPSB0IC0gKG1lLmMgPSB0IHwgMCk7XG4gIH07XG5cbiAgLy8gQXBwbHkgdGhlIHNlZWRpbmcgYWxnb3JpdGhtIGZyb20gQmFhZ29lLlxuICBtZS5jID0gMTtcbiAgbWUuczAgPSBtYXNoKCcgJyk7XG4gIG1lLnMxID0gbWFzaCgnICcpO1xuICBtZS5zMiA9IG1hc2goJyAnKTtcbiAgbWUuczAgLT0gbWFzaChzZWVkKTtcbiAgaWYgKG1lLnMwIDwgMCkgeyBtZS5zMCArPSAxOyB9XG4gIG1lLnMxIC09IG1hc2goc2VlZCk7XG4gIGlmIChtZS5zMSA8IDApIHsgbWUuczEgKz0gMTsgfVxuICBtZS5zMiAtPSBtYXNoKHNlZWQpO1xuICBpZiAobWUuczIgPCAwKSB7IG1lLnMyICs9IDE7IH1cbiAgbWFzaCA9IG51bGw7XG59XG5cbmZ1bmN0aW9uIGNvcHkoZiwgdCkge1xuICB0LmMgPSBmLmM7XG4gIHQuczAgPSBmLnMwO1xuICB0LnMxID0gZi5zMTtcbiAgdC5zMiA9IGYuczI7XG4gIHJldHVybiB0O1xufVxuXG5mdW5jdGlvbiBpbXBsKHNlZWQsIG9wdHMpIHtcbiAgdmFyIHhnID0gbmV3IEFsZWEoc2VlZCksXG4gICAgICBzdGF0ZSA9IG9wdHMgJiYgb3B0cy5zdGF0ZSxcbiAgICAgIHBybmcgPSB4Zy5uZXh0O1xuICBwcm5nLmludDMyID0gZnVuY3Rpb24oKSB7IHJldHVybiAoeGcubmV4dCgpICogMHgxMDAwMDAwMDApIHwgMDsgfVxuICBwcm5nLmRvdWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBwcm5nKCkgKyAocHJuZygpICogMHgyMDAwMDAgfCAwKSAqIDEuMTEwMjIzMDI0NjI1MTU2NWUtMTY7IC8vIDJeLTUzXG4gIH07XG4gIHBybmcucXVpY2sgPSBwcm5nO1xuICBpZiAoc3RhdGUpIHtcbiAgICBpZiAodHlwZW9mKHN0YXRlKSA9PSAnb2JqZWN0JykgY29weShzdGF0ZSwgeGcpO1xuICAgIHBybmcuc3RhdGUgPSBmdW5jdGlvbigpIHsgcmV0dXJuIGNvcHkoeGcsIHt9KTsgfVxuICB9XG4gIHJldHVybiBwcm5nO1xufVxuXG5mdW5jdGlvbiBNYXNoKCkge1xuICB2YXIgbiA9IDB4ZWZjODI0OWQ7XG5cbiAgdmFyIG1hc2ggPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgZGF0YSA9IFN0cmluZyhkYXRhKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIG4gKz0gZGF0YS5jaGFyQ29kZUF0KGkpO1xuICAgICAgdmFyIGggPSAwLjAyNTE5NjAzMjgyNDE2OTM4ICogbjtcbiAgICAgIG4gPSBoID4+PiAwO1xuICAgICAgaCAtPSBuO1xuICAgICAgaCAqPSBuO1xuICAgICAgbiA9IGggPj4+IDA7XG4gICAgICBoIC09IG47XG4gICAgICBuICs9IGggKiAweDEwMDAwMDAwMDsgLy8gMl4zMlxuICAgIH1cbiAgICByZXR1cm4gKG4gPj4+IDApICogMi4zMjgzMDY0MzY1Mzg2OTYzZS0xMDsgLy8gMl4tMzJcbiAgfTtcblxuICByZXR1cm4gbWFzaDtcbn1cblxuXG5pZiAobW9kdWxlICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gaW1wbDtcbn0gZWxzZSBpZiAoZGVmaW5lICYmIGRlZmluZS5hbWQpIHtcbiAgZGVmaW5lKGZ1bmN0aW9uKCkgeyByZXR1cm4gaW1wbDsgfSk7XG59IGVsc2Uge1xuICB0aGlzLmFsZWEgPSBpbXBsO1xufVxuXG59KShcbiAgdGhpcyxcbiAgKHR5cGVvZiBtb2R1bGUpID09ICdvYmplY3QnICYmIG1vZHVsZSwgICAgLy8gcHJlc2VudCBpbiBub2RlLmpzXG4gICh0eXBlb2YgZGVmaW5lKSA9PSAnZnVuY3Rpb24nICYmIGRlZmluZSAgIC8vIHByZXNlbnQgd2l0aCBhbiBBTUQgbG9hZGVyXG4pO1xuXG5cbiIsIi8vIEEgSmF2YXNjcmlwdCBpbXBsZW1lbnRhaW9uIG9mIHRoZSBcIlR5Y2hlLWlcIiBwcm5nIGFsZ29yaXRobSBieVxuLy8gU2FtdWVsIE5ldmVzIGFuZCBGaWxpcGUgQXJhdWpvLlxuLy8gU2VlIGh0dHBzOi8vZWRlbi5kZWkudWMucHQvfnNuZXZlcy9wdWJzLzIwMTEtc25mYTIucGRmXG5cbihmdW5jdGlvbihnbG9iYWwsIG1vZHVsZSwgZGVmaW5lKSB7XG5cbmZ1bmN0aW9uIFhvckdlbihzZWVkKSB7XG4gIHZhciBtZSA9IHRoaXMsIHN0cnNlZWQgPSAnJztcblxuICAvLyBTZXQgdXAgZ2VuZXJhdG9yIGZ1bmN0aW9uLlxuICBtZS5uZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGIgPSBtZS5iLCBjID0gbWUuYywgZCA9IG1lLmQsIGEgPSBtZS5hO1xuICAgIGIgPSAoYiA8PCAyNSkgXiAoYiA+Pj4gNykgXiBjO1xuICAgIGMgPSAoYyAtIGQpIHwgMDtcbiAgICBkID0gKGQgPDwgMjQpIF4gKGQgPj4+IDgpIF4gYTtcbiAgICBhID0gKGEgLSBiKSB8IDA7XG4gICAgbWUuYiA9IGIgPSAoYiA8PCAyMCkgXiAoYiA+Pj4gMTIpIF4gYztcbiAgICBtZS5jID0gYyA9IChjIC0gZCkgfCAwO1xuICAgIG1lLmQgPSAoZCA8PCAxNikgXiAoYyA+Pj4gMTYpIF4gYTtcbiAgICByZXR1cm4gbWUuYSA9IChhIC0gYikgfCAwO1xuICB9O1xuXG4gIC8qIFRoZSBmb2xsb3dpbmcgaXMgbm9uLWludmVydGVkIHR5Y2hlLCB3aGljaCBoYXMgYmV0dGVyIGludGVybmFsXG4gICAqIGJpdCBkaWZmdXNpb24sIGJ1dCB3aGljaCBpcyBhYm91dCAyNSUgc2xvd2VyIHRoYW4gdHljaGUtaSBpbiBKUy5cbiAgbWUubmV4dCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhID0gbWUuYSwgYiA9IG1lLmIsIGMgPSBtZS5jLCBkID0gbWUuZDtcbiAgICBhID0gKG1lLmEgKyBtZS5iIHwgMCkgPj4+IDA7XG4gICAgZCA9IG1lLmQgXiBhOyBkID0gZCA8PCAxNiBeIGQgPj4+IDE2O1xuICAgIGMgPSBtZS5jICsgZCB8IDA7XG4gICAgYiA9IG1lLmIgXiBjOyBiID0gYiA8PCAxMiBeIGQgPj4+IDIwO1xuICAgIG1lLmEgPSBhID0gYSArIGIgfCAwO1xuICAgIGQgPSBkIF4gYTsgbWUuZCA9IGQgPSBkIDw8IDggXiBkID4+PiAyNDtcbiAgICBtZS5jID0gYyA9IGMgKyBkIHwgMDtcbiAgICBiID0gYiBeIGM7XG4gICAgcmV0dXJuIG1lLmIgPSAoYiA8PCA3IF4gYiA+Pj4gMjUpO1xuICB9XG4gICovXG5cbiAgbWUuYSA9IDA7XG4gIG1lLmIgPSAwO1xuICBtZS5jID0gMjY1NDQzNTc2OSB8IDA7XG4gIG1lLmQgPSAxMzY3MTMwNTUxO1xuXG4gIGlmIChzZWVkID09PSBNYXRoLmZsb29yKHNlZWQpKSB7XG4gICAgLy8gSW50ZWdlciBzZWVkLlxuICAgIG1lLmEgPSAoc2VlZCAvIDB4MTAwMDAwMDAwKSB8IDA7XG4gICAgbWUuYiA9IHNlZWQgfCAwO1xuICB9IGVsc2Uge1xuICAgIC8vIFN0cmluZyBzZWVkLlxuICAgIHN0cnNlZWQgKz0gc2VlZDtcbiAgfVxuXG4gIC8vIE1peCBpbiBzdHJpbmcgc2VlZCwgdGhlbiBkaXNjYXJkIGFuIGluaXRpYWwgYmF0Y2ggb2YgNjQgdmFsdWVzLlxuICBmb3IgKHZhciBrID0gMDsgayA8IHN0cnNlZWQubGVuZ3RoICsgMjA7IGsrKykge1xuICAgIG1lLmIgXj0gc3Ryc2VlZC5jaGFyQ29kZUF0KGspIHwgMDtcbiAgICBtZS5uZXh0KCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY29weShmLCB0KSB7XG4gIHQuYSA9IGYuYTtcbiAgdC5iID0gZi5iO1xuICB0LmMgPSBmLmM7XG4gIHQuZCA9IGYuZDtcbiAgcmV0dXJuIHQ7XG59O1xuXG5mdW5jdGlvbiBpbXBsKHNlZWQsIG9wdHMpIHtcbiAgdmFyIHhnID0gbmV3IFhvckdlbihzZWVkKSxcbiAgICAgIHN0YXRlID0gb3B0cyAmJiBvcHRzLnN0YXRlLFxuICAgICAgcHJuZyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gKHhnLm5leHQoKSA+Pj4gMCkgLyAweDEwMDAwMDAwMDsgfTtcbiAgcHJuZy5kb3VibGUgPSBmdW5jdGlvbigpIHtcbiAgICBkbyB7XG4gICAgICB2YXIgdG9wID0geGcubmV4dCgpID4+PiAxMSxcbiAgICAgICAgICBib3QgPSAoeGcubmV4dCgpID4+PiAwKSAvIDB4MTAwMDAwMDAwLFxuICAgICAgICAgIHJlc3VsdCA9ICh0b3AgKyBib3QpIC8gKDEgPDwgMjEpO1xuICAgIH0gd2hpbGUgKHJlc3VsdCA9PT0gMCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbiAgcHJuZy5pbnQzMiA9IHhnLm5leHQ7XG4gIHBybmcucXVpY2sgPSBwcm5nO1xuICBpZiAoc3RhdGUpIHtcbiAgICBpZiAodHlwZW9mKHN0YXRlKSA9PSAnb2JqZWN0JykgY29weShzdGF0ZSwgeGcpO1xuICAgIHBybmcuc3RhdGUgPSBmdW5jdGlvbigpIHsgcmV0dXJuIGNvcHkoeGcsIHt9KTsgfVxuICB9XG4gIHJldHVybiBwcm5nO1xufVxuXG5pZiAobW9kdWxlICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gaW1wbDtcbn0gZWxzZSBpZiAoZGVmaW5lICYmIGRlZmluZS5hbWQpIHtcbiAgZGVmaW5lKGZ1bmN0aW9uKCkgeyByZXR1cm4gaW1wbDsgfSk7XG59IGVsc2Uge1xuICB0aGlzLnR5Y2hlaSA9IGltcGw7XG59XG5cbn0pKFxuICB0aGlzLFxuICAodHlwZW9mIG1vZHVsZSkgPT0gJ29iamVjdCcgJiYgbW9kdWxlLCAgICAvLyBwcmVzZW50IGluIG5vZGUuanNcbiAgKHR5cGVvZiBkZWZpbmUpID09ICdmdW5jdGlvbicgJiYgZGVmaW5lICAgLy8gcHJlc2VudCB3aXRoIGFuIEFNRCBsb2FkZXJcbik7XG5cblxuIiwiLy8gQSBKYXZhc2NyaXB0IGltcGxlbWVudGFpb24gb2YgdGhlIFwieG9yMTI4XCIgcHJuZyBhbGdvcml0aG0gYnlcbi8vIEdlb3JnZSBNYXJzYWdsaWEuICBTZWUgaHR0cDovL3d3dy5qc3RhdHNvZnQub3JnL3YwOC9pMTQvcGFwZXJcblxuKGZ1bmN0aW9uKGdsb2JhbCwgbW9kdWxlLCBkZWZpbmUpIHtcblxuZnVuY3Rpb24gWG9yR2VuKHNlZWQpIHtcbiAgdmFyIG1lID0gdGhpcywgc3Ryc2VlZCA9ICcnO1xuXG4gIG1lLnggPSAwO1xuICBtZS55ID0gMDtcbiAgbWUueiA9IDA7XG4gIG1lLncgPSAwO1xuXG4gIC8vIFNldCB1cCBnZW5lcmF0b3IgZnVuY3Rpb24uXG4gIG1lLm5leHQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdCA9IG1lLnggXiAobWUueCA8PCAxMSk7XG4gICAgbWUueCA9IG1lLnk7XG4gICAgbWUueSA9IG1lLno7XG4gICAgbWUueiA9IG1lLnc7XG4gICAgcmV0dXJuIG1lLncgXj0gKG1lLncgPj4+IDE5KSBeIHQgXiAodCA+Pj4gOCk7XG4gIH07XG5cbiAgaWYgKHNlZWQgPT09IChzZWVkIHwgMCkpIHtcbiAgICAvLyBJbnRlZ2VyIHNlZWQuXG4gICAgbWUueCA9IHNlZWQ7XG4gIH0gZWxzZSB7XG4gICAgLy8gU3RyaW5nIHNlZWQuXG4gICAgc3Ryc2VlZCArPSBzZWVkO1xuICB9XG5cbiAgLy8gTWl4IGluIHN0cmluZyBzZWVkLCB0aGVuIGRpc2NhcmQgYW4gaW5pdGlhbCBiYXRjaCBvZiA2NCB2YWx1ZXMuXG4gIGZvciAodmFyIGsgPSAwOyBrIDwgc3Ryc2VlZC5sZW5ndGggKyA2NDsgaysrKSB7XG4gICAgbWUueCBePSBzdHJzZWVkLmNoYXJDb2RlQXQoaykgfCAwO1xuICAgIG1lLm5leHQoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjb3B5KGYsIHQpIHtcbiAgdC54ID0gZi54O1xuICB0LnkgPSBmLnk7XG4gIHQueiA9IGYuejtcbiAgdC53ID0gZi53O1xuICByZXR1cm4gdDtcbn1cblxuZnVuY3Rpb24gaW1wbChzZWVkLCBvcHRzKSB7XG4gIHZhciB4ZyA9IG5ldyBYb3JHZW4oc2VlZCksXG4gICAgICBzdGF0ZSA9IG9wdHMgJiYgb3B0cy5zdGF0ZSxcbiAgICAgIHBybmcgPSBmdW5jdGlvbigpIHsgcmV0dXJuICh4Zy5uZXh0KCkgPj4+IDApIC8gMHgxMDAwMDAwMDA7IH07XG4gIHBybmcuZG91YmxlID0gZnVuY3Rpb24oKSB7XG4gICAgZG8ge1xuICAgICAgdmFyIHRvcCA9IHhnLm5leHQoKSA+Pj4gMTEsXG4gICAgICAgICAgYm90ID0gKHhnLm5leHQoKSA+Pj4gMCkgLyAweDEwMDAwMDAwMCxcbiAgICAgICAgICByZXN1bHQgPSAodG9wICsgYm90KSAvICgxIDw8IDIxKTtcbiAgICB9IHdoaWxlIChyZXN1bHQgPT09IDApO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG4gIHBybmcuaW50MzIgPSB4Zy5uZXh0O1xuICBwcm5nLnF1aWNrID0gcHJuZztcbiAgaWYgKHN0YXRlKSB7XG4gICAgaWYgKHR5cGVvZihzdGF0ZSkgPT0gJ29iamVjdCcpIGNvcHkoc3RhdGUsIHhnKTtcbiAgICBwcm5nLnN0YXRlID0gZnVuY3Rpb24oKSB7IHJldHVybiBjb3B5KHhnLCB7fSk7IH1cbiAgfVxuICByZXR1cm4gcHJuZztcbn1cblxuaWYgKG1vZHVsZSAmJiBtb2R1bGUuZXhwb3J0cykge1xuICBtb2R1bGUuZXhwb3J0cyA9IGltcGw7XG59IGVsc2UgaWYgKGRlZmluZSAmJiBkZWZpbmUuYW1kKSB7XG4gIGRlZmluZShmdW5jdGlvbigpIHsgcmV0dXJuIGltcGw7IH0pO1xufSBlbHNlIHtcbiAgdGhpcy54b3IxMjggPSBpbXBsO1xufVxuXG59KShcbiAgdGhpcyxcbiAgKHR5cGVvZiBtb2R1bGUpID09ICdvYmplY3QnICYmIG1vZHVsZSwgICAgLy8gcHJlc2VudCBpbiBub2RlLmpzXG4gICh0eXBlb2YgZGVmaW5lKSA9PSAnZnVuY3Rpb24nICYmIGRlZmluZSAgIC8vIHByZXNlbnQgd2l0aCBhbiBBTUQgbG9hZGVyXG4pO1xuXG5cbiIsIi8vIEEgSmF2YXNjcmlwdCBpbXBsZW1lbnRhaW9uIG9mIFJpY2hhcmQgQnJlbnQncyBYb3JnZW5zIHhvcjQwOTYgYWxnb3JpdGhtLlxuLy9cbi8vIFRoaXMgZmFzdCBub24tY3J5cHRvZ3JhcGhpYyByYW5kb20gbnVtYmVyIGdlbmVyYXRvciBpcyBkZXNpZ25lZCBmb3Jcbi8vIHVzZSBpbiBNb250ZS1DYXJsbyBhbGdvcml0aG1zLiBJdCBjb21iaW5lcyBhIGxvbmctcGVyaW9kIHhvcnNoaWZ0XG4vLyBnZW5lcmF0b3Igd2l0aCBhIFdleWwgZ2VuZXJhdG9yLCBhbmQgaXQgcGFzc2VzIGFsbCBjb21tb24gYmF0dGVyaWVzXG4vLyBvZiBzdGFzdGljaWFsIHRlc3RzIGZvciByYW5kb21uZXNzIHdoaWxlIGNvbnN1bWluZyBvbmx5IGEgZmV3IG5hbm9zZWNvbmRzXG4vLyBmb3IgZWFjaCBwcm5nIGdlbmVyYXRlZC4gIEZvciBiYWNrZ3JvdW5kIG9uIHRoZSBnZW5lcmF0b3IsIHNlZSBCcmVudCdzXG4vLyBwYXBlcjogXCJTb21lIGxvbmctcGVyaW9kIHJhbmRvbSBudW1iZXIgZ2VuZXJhdG9ycyB1c2luZyBzaGlmdHMgYW5kIHhvcnMuXCJcbi8vIGh0dHA6Ly9hcnhpdi5vcmcvcGRmLzEwMDQuMzExNXYxLnBkZlxuLy9cbi8vIFVzYWdlOlxuLy9cbi8vIHZhciB4b3I0MDk2ID0gcmVxdWlyZSgneG9yNDA5NicpO1xuLy8gcmFuZG9tID0geG9yNDA5NigxKTsgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZWVkIHdpdGggaW50MzIgb3Igc3RyaW5nLlxuLy8gYXNzZXJ0LmVxdWFsKHJhbmRvbSgpLCAwLjE1MjA0MzY0NTA1Mzg1NDcpOyAvLyAoMCwgMSkgcmFuZ2UsIDUzIGJpdHMuXG4vLyBhc3NlcnQuZXF1YWwocmFuZG9tLmludDMyKCksIDE4MDY1MzQ4OTcpOyAgIC8vIHNpZ25lZCBpbnQzMiwgMzIgYml0cy5cbi8vXG4vLyBGb3Igbm9uemVybyBudW1lcmljIGtleXMsIHRoaXMgaW1wZWxlbWVudGF0aW9uIHByb3ZpZGVzIGEgc2VxdWVuY2Vcbi8vIGlkZW50aWNhbCB0byB0aGF0IGJ5IEJyZW50J3MgeG9yZ2VucyAzIGltcGxlbWVudGFpb24gaW4gQy4gIFRoaXNcbi8vIGltcGxlbWVudGF0aW9uIGFsc28gcHJvdmlkZXMgZm9yIGluaXRhbGl6aW5nIHRoZSBnZW5lcmF0b3Igd2l0aFxuLy8gc3RyaW5nIHNlZWRzLCBvciBmb3Igc2F2aW5nIGFuZCByZXN0b3JpbmcgdGhlIHN0YXRlIG9mIHRoZSBnZW5lcmF0b3IuXG4vL1xuLy8gT24gQ2hyb21lLCB0aGlzIHBybmcgYmVuY2htYXJrcyBhYm91dCAyLjEgdGltZXMgc2xvd2VyIHRoYW5cbi8vIEphdmFzY3JpcHQncyBidWlsdC1pbiBNYXRoLnJhbmRvbSgpLlxuXG4oZnVuY3Rpb24oZ2xvYmFsLCBtb2R1bGUsIGRlZmluZSkge1xuXG5mdW5jdGlvbiBYb3JHZW4oc2VlZCkge1xuICB2YXIgbWUgPSB0aGlzO1xuXG4gIC8vIFNldCB1cCBnZW5lcmF0b3IgZnVuY3Rpb24uXG4gIG1lLm5leHQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdyA9IG1lLncsXG4gICAgICAgIFggPSBtZS5YLCBpID0gbWUuaSwgdCwgdjtcbiAgICAvLyBVcGRhdGUgV2V5bCBnZW5lcmF0b3IuXG4gICAgbWUudyA9IHcgPSAodyArIDB4NjFjODg2NDcpIHwgMDtcbiAgICAvLyBVcGRhdGUgeG9yIGdlbmVyYXRvci5cbiAgICB2ID0gWFsoaSArIDM0KSAmIDEyN107XG4gICAgdCA9IFhbaSA9ICgoaSArIDEpICYgMTI3KV07XG4gICAgdiBePSB2IDw8IDEzO1xuICAgIHQgXj0gdCA8PCAxNztcbiAgICB2IF49IHYgPj4+IDE1O1xuICAgIHQgXj0gdCA+Pj4gMTI7XG4gICAgLy8gVXBkYXRlIFhvciBnZW5lcmF0b3IgYXJyYXkgc3RhdGUuXG4gICAgdiA9IFhbaV0gPSB2IF4gdDtcbiAgICBtZS5pID0gaTtcbiAgICAvLyBSZXN1bHQgaXMgdGhlIGNvbWJpbmF0aW9uLlxuICAgIHJldHVybiAodiArICh3IF4gKHcgPj4+IDE2KSkpIHwgMDtcbiAgfTtcblxuICBmdW5jdGlvbiBpbml0KG1lLCBzZWVkKSB7XG4gICAgdmFyIHQsIHYsIGksIGosIHcsIFggPSBbXSwgbGltaXQgPSAxMjg7XG4gICAgaWYgKHNlZWQgPT09IChzZWVkIHwgMCkpIHtcbiAgICAgIC8vIE51bWVyaWMgc2VlZHMgaW5pdGlhbGl6ZSB2LCB3aGljaCBpcyB1c2VkIHRvIGdlbmVyYXRlcyBYLlxuICAgICAgdiA9IHNlZWQ7XG4gICAgICBzZWVkID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU3RyaW5nIHNlZWRzIGFyZSBtaXhlZCBpbnRvIHYgYW5kIFggb25lIGNoYXJhY3RlciBhdCBhIHRpbWUuXG4gICAgICBzZWVkID0gc2VlZCArICdcXDAnO1xuICAgICAgdiA9IDA7XG4gICAgICBsaW1pdCA9IE1hdGgubWF4KGxpbWl0LCBzZWVkLmxlbmd0aCk7XG4gICAgfVxuICAgIC8vIEluaXRpYWxpemUgY2lyY3VsYXIgYXJyYXkgYW5kIHdleWwgdmFsdWUuXG4gICAgZm9yIChpID0gMCwgaiA9IC0zMjsgaiA8IGxpbWl0OyArK2opIHtcbiAgICAgIC8vIFB1dCB0aGUgdW5pY29kZSBjaGFyYWN0ZXJzIGludG8gdGhlIGFycmF5LCBhbmQgc2h1ZmZsZSB0aGVtLlxuICAgICAgaWYgKHNlZWQpIHYgXj0gc2VlZC5jaGFyQ29kZUF0KChqICsgMzIpICUgc2VlZC5sZW5ndGgpO1xuICAgICAgLy8gQWZ0ZXIgMzIgc2h1ZmZsZXMsIHRha2UgdiBhcyB0aGUgc3RhcnRpbmcgdyB2YWx1ZS5cbiAgICAgIGlmIChqID09PSAwKSB3ID0gdjtcbiAgICAgIHYgXj0gdiA8PCAxMDtcbiAgICAgIHYgXj0gdiA+Pj4gMTU7XG4gICAgICB2IF49IHYgPDwgNDtcbiAgICAgIHYgXj0gdiA+Pj4gMTM7XG4gICAgICBpZiAoaiA+PSAwKSB7XG4gICAgICAgIHcgPSAodyArIDB4NjFjODg2NDcpIHwgMDsgICAgIC8vIFdleWwuXG4gICAgICAgIHQgPSAoWFtqICYgMTI3XSBePSAodiArIHcpKTsgIC8vIENvbWJpbmUgeG9yIGFuZCB3ZXlsIHRvIGluaXQgYXJyYXkuXG4gICAgICAgIGkgPSAoMCA9PSB0KSA/IGkgKyAxIDogMDsgICAgIC8vIENvdW50IHplcm9lcy5cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gV2UgaGF2ZSBkZXRlY3RlZCBhbGwgemVyb2VzOyBtYWtlIHRoZSBrZXkgbm9uemVyby5cbiAgICBpZiAoaSA+PSAxMjgpIHtcbiAgICAgIFhbKHNlZWQgJiYgc2VlZC5sZW5ndGggfHwgMCkgJiAxMjddID0gLTE7XG4gICAgfVxuICAgIC8vIFJ1biB0aGUgZ2VuZXJhdG9yIDUxMiB0aW1lcyB0byBmdXJ0aGVyIG1peCB0aGUgc3RhdGUgYmVmb3JlIHVzaW5nIGl0LlxuICAgIC8vIEZhY3RvcmluZyB0aGlzIGFzIGEgZnVuY3Rpb24gc2xvd3MgdGhlIG1haW4gZ2VuZXJhdG9yLCBzbyBpdCBpcyBqdXN0XG4gICAgLy8gdW5yb2xsZWQgaGVyZS4gIFRoZSB3ZXlsIGdlbmVyYXRvciBpcyBub3QgYWR2YW5jZWQgd2hpbGUgd2FybWluZyB1cC5cbiAgICBpID0gMTI3O1xuICAgIGZvciAoaiA9IDQgKiAxMjg7IGogPiAwOyAtLWopIHtcbiAgICAgIHYgPSBYWyhpICsgMzQpICYgMTI3XTtcbiAgICAgIHQgPSBYW2kgPSAoKGkgKyAxKSAmIDEyNyldO1xuICAgICAgdiBePSB2IDw8IDEzO1xuICAgICAgdCBePSB0IDw8IDE3O1xuICAgICAgdiBePSB2ID4+PiAxNTtcbiAgICAgIHQgXj0gdCA+Pj4gMTI7XG4gICAgICBYW2ldID0gdiBeIHQ7XG4gICAgfVxuICAgIC8vIFN0b3Jpbmcgc3RhdGUgYXMgb2JqZWN0IG1lbWJlcnMgaXMgZmFzdGVyIHRoYW4gdXNpbmcgY2xvc3VyZSB2YXJpYWJsZXMuXG4gICAgbWUudyA9IHc7XG4gICAgbWUuWCA9IFg7XG4gICAgbWUuaSA9IGk7XG4gIH1cblxuICBpbml0KG1lLCBzZWVkKTtcbn1cblxuZnVuY3Rpb24gY29weShmLCB0KSB7XG4gIHQuaSA9IGYuaTtcbiAgdC53ID0gZi53O1xuICB0LlggPSBmLlguc2xpY2UoKTtcbiAgcmV0dXJuIHQ7XG59O1xuXG5mdW5jdGlvbiBpbXBsKHNlZWQsIG9wdHMpIHtcbiAgaWYgKHNlZWQgPT0gbnVsbCkgc2VlZCA9ICsobmV3IERhdGUpO1xuICB2YXIgeGcgPSBuZXcgWG9yR2VuKHNlZWQpLFxuICAgICAgc3RhdGUgPSBvcHRzICYmIG9wdHMuc3RhdGUsXG4gICAgICBwcm5nID0gZnVuY3Rpb24oKSB7IHJldHVybiAoeGcubmV4dCgpID4+PiAwKSAvIDB4MTAwMDAwMDAwOyB9O1xuICBwcm5nLmRvdWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgIGRvIHtcbiAgICAgIHZhciB0b3AgPSB4Zy5uZXh0KCkgPj4+IDExLFxuICAgICAgICAgIGJvdCA9ICh4Zy5uZXh0KCkgPj4+IDApIC8gMHgxMDAwMDAwMDAsXG4gICAgICAgICAgcmVzdWx0ID0gKHRvcCArIGJvdCkgLyAoMSA8PCAyMSk7XG4gICAgfSB3aGlsZSAocmVzdWx0ID09PSAwKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuICBwcm5nLmludDMyID0geGcubmV4dDtcbiAgcHJuZy5xdWljayA9IHBybmc7XG4gIGlmIChzdGF0ZSkge1xuICAgIGlmIChzdGF0ZS5YKSBjb3B5KHN0YXRlLCB4Zyk7XG4gICAgcHJuZy5zdGF0ZSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gY29weSh4Zywge30pOyB9XG4gIH1cbiAgcmV0dXJuIHBybmc7XG59XG5cbmlmIChtb2R1bGUgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBpbXBsO1xufSBlbHNlIGlmIChkZWZpbmUgJiYgZGVmaW5lLmFtZCkge1xuICBkZWZpbmUoZnVuY3Rpb24oKSB7IHJldHVybiBpbXBsOyB9KTtcbn0gZWxzZSB7XG4gIHRoaXMueG9yNDA5NiA9IGltcGw7XG59XG5cbn0pKFxuICB0aGlzLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aW5kb3cgb2JqZWN0IG9yIGdsb2JhbFxuICAodHlwZW9mIG1vZHVsZSkgPT0gJ29iamVjdCcgJiYgbW9kdWxlLCAgICAvLyBwcmVzZW50IGluIG5vZGUuanNcbiAgKHR5cGVvZiBkZWZpbmUpID09ICdmdW5jdGlvbicgJiYgZGVmaW5lICAgLy8gcHJlc2VudCB3aXRoIGFuIEFNRCBsb2FkZXJcbik7XG4iLCIvLyBBIEphdmFzY3JpcHQgaW1wbGVtZW50YWlvbiBvZiB0aGUgXCJ4b3JzaGlmdDdcIiBhbGdvcml0aG0gYnlcbi8vIEZyYW7Dp29pcyBQYW5uZXRvbiBhbmQgUGllcnJlIEwnZWN1eWVyOlxuLy8gXCJPbiB0aGUgWG9yZ3NoaWZ0IFJhbmRvbSBOdW1iZXIgR2VuZXJhdG9yc1wiXG4vLyBodHRwOi8vc2FsdWMuZW5nci51Y29ubi5lZHUvcmVmcy9jcnlwdG8vcm5nL3Bhbm5ldG9uMDVvbnRoZXhvcnNoaWZ0LnBkZlxuXG4oZnVuY3Rpb24oZ2xvYmFsLCBtb2R1bGUsIGRlZmluZSkge1xuXG5mdW5jdGlvbiBYb3JHZW4oc2VlZCkge1xuICB2YXIgbWUgPSB0aGlzO1xuXG4gIC8vIFNldCB1cCBnZW5lcmF0b3IgZnVuY3Rpb24uXG4gIG1lLm5leHQgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBVcGRhdGUgeG9yIGdlbmVyYXRvci5cbiAgICB2YXIgWCA9IG1lLngsIGkgPSBtZS5pLCB0LCB2LCB3O1xuICAgIHQgPSBYW2ldOyB0IF49ICh0ID4+PiA3KTsgdiA9IHQgXiAodCA8PCAyNCk7XG4gICAgdCA9IFhbKGkgKyAxKSAmIDddOyB2IF49IHQgXiAodCA+Pj4gMTApO1xuICAgIHQgPSBYWyhpICsgMykgJiA3XTsgdiBePSB0IF4gKHQgPj4+IDMpO1xuICAgIHQgPSBYWyhpICsgNCkgJiA3XTsgdiBePSB0IF4gKHQgPDwgNyk7XG4gICAgdCA9IFhbKGkgKyA3KSAmIDddOyB0ID0gdCBeICh0IDw8IDEzKTsgdiBePSB0IF4gKHQgPDwgOSk7XG4gICAgWFtpXSA9IHY7XG4gICAgbWUuaSA9IChpICsgMSkgJiA3O1xuICAgIHJldHVybiB2O1xuICB9O1xuXG4gIGZ1bmN0aW9uIGluaXQobWUsIHNlZWQpIHtcbiAgICB2YXIgaiwgdywgWCA9IFtdO1xuXG4gICAgaWYgKHNlZWQgPT09IChzZWVkIHwgMCkpIHtcbiAgICAgIC8vIFNlZWQgc3RhdGUgYXJyYXkgdXNpbmcgYSAzMi1iaXQgaW50ZWdlci5cbiAgICAgIHcgPSBYWzBdID0gc2VlZDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2VlZCBzdGF0ZSB1c2luZyBhIHN0cmluZy5cbiAgICAgIHNlZWQgPSAnJyArIHNlZWQ7XG4gICAgICBmb3IgKGogPSAwOyBqIDwgc2VlZC5sZW5ndGg7ICsraikge1xuICAgICAgICBYW2ogJiA3XSA9IChYW2ogJiA3XSA8PCAxNSkgXlxuICAgICAgICAgICAgKHNlZWQuY2hhckNvZGVBdChqKSArIFhbKGogKyAxKSAmIDddIDw8IDEzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gRW5mb3JjZSBhbiBhcnJheSBsZW5ndGggb2YgOCwgbm90IGFsbCB6ZXJvZXMuXG4gICAgd2hpbGUgKFgubGVuZ3RoIDwgOCkgWC5wdXNoKDApO1xuICAgIGZvciAoaiA9IDA7IGogPCA4ICYmIFhbal0gPT09IDA7ICsraik7XG4gICAgaWYgKGogPT0gOCkgdyA9IFhbN10gPSAtMTsgZWxzZSB3ID0gWFtqXTtcblxuICAgIG1lLnggPSBYO1xuICAgIG1lLmkgPSAwO1xuXG4gICAgLy8gRGlzY2FyZCBhbiBpbml0aWFsIDI1NiB2YWx1ZXMuXG4gICAgZm9yIChqID0gMjU2OyBqID4gMDsgLS1qKSB7XG4gICAgICBtZS5uZXh0KCk7XG4gICAgfVxuICB9XG5cbiAgaW5pdChtZSwgc2VlZCk7XG59XG5cbmZ1bmN0aW9uIGNvcHkoZiwgdCkge1xuICB0LnggPSBmLnguc2xpY2UoKTtcbiAgdC5pID0gZi5pO1xuICByZXR1cm4gdDtcbn1cblxuZnVuY3Rpb24gaW1wbChzZWVkLCBvcHRzKSB7XG4gIGlmIChzZWVkID09IG51bGwpIHNlZWQgPSArKG5ldyBEYXRlKTtcbiAgdmFyIHhnID0gbmV3IFhvckdlbihzZWVkKSxcbiAgICAgIHN0YXRlID0gb3B0cyAmJiBvcHRzLnN0YXRlLFxuICAgICAgcHJuZyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gKHhnLm5leHQoKSA+Pj4gMCkgLyAweDEwMDAwMDAwMDsgfTtcbiAgcHJuZy5kb3VibGUgPSBmdW5jdGlvbigpIHtcbiAgICBkbyB7XG4gICAgICB2YXIgdG9wID0geGcubmV4dCgpID4+PiAxMSxcbiAgICAgICAgICBib3QgPSAoeGcubmV4dCgpID4+PiAwKSAvIDB4MTAwMDAwMDAwLFxuICAgICAgICAgIHJlc3VsdCA9ICh0b3AgKyBib3QpIC8gKDEgPDwgMjEpO1xuICAgIH0gd2hpbGUgKHJlc3VsdCA9PT0gMCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbiAgcHJuZy5pbnQzMiA9IHhnLm5leHQ7XG4gIHBybmcucXVpY2sgPSBwcm5nO1xuICBpZiAoc3RhdGUpIHtcbiAgICBpZiAoc3RhdGUueCkgY29weShzdGF0ZSwgeGcpO1xuICAgIHBybmcuc3RhdGUgPSBmdW5jdGlvbigpIHsgcmV0dXJuIGNvcHkoeGcsIHt9KTsgfVxuICB9XG4gIHJldHVybiBwcm5nO1xufVxuXG5pZiAobW9kdWxlICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gaW1wbDtcbn0gZWxzZSBpZiAoZGVmaW5lICYmIGRlZmluZS5hbWQpIHtcbiAgZGVmaW5lKGZ1bmN0aW9uKCkgeyByZXR1cm4gaW1wbDsgfSk7XG59IGVsc2Uge1xuICB0aGlzLnhvcnNoaWZ0NyA9IGltcGw7XG59XG5cbn0pKFxuICB0aGlzLFxuICAodHlwZW9mIG1vZHVsZSkgPT0gJ29iamVjdCcgJiYgbW9kdWxlLCAgICAvLyBwcmVzZW50IGluIG5vZGUuanNcbiAgKHR5cGVvZiBkZWZpbmUpID09ICdmdW5jdGlvbicgJiYgZGVmaW5lICAgLy8gcHJlc2VudCB3aXRoIGFuIEFNRCBsb2FkZXJcbik7XG5cbiIsIi8vIEEgSmF2YXNjcmlwdCBpbXBsZW1lbnRhaW9uIG9mIHRoZSBcInhvcndvd1wiIHBybmcgYWxnb3JpdGhtIGJ5XG4vLyBHZW9yZ2UgTWFyc2FnbGlhLiAgU2VlIGh0dHA6Ly93d3cuanN0YXRzb2Z0Lm9yZy92MDgvaTE0L3BhcGVyXG5cbihmdW5jdGlvbihnbG9iYWwsIG1vZHVsZSwgZGVmaW5lKSB7XG5cbmZ1bmN0aW9uIFhvckdlbihzZWVkKSB7XG4gIHZhciBtZSA9IHRoaXMsIHN0cnNlZWQgPSAnJztcblxuICAvLyBTZXQgdXAgZ2VuZXJhdG9yIGZ1bmN0aW9uLlxuICBtZS5uZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHQgPSAobWUueCBeIChtZS54ID4+PiAyKSk7XG4gICAgbWUueCA9IG1lLnk7IG1lLnkgPSBtZS56OyBtZS56ID0gbWUudzsgbWUudyA9IG1lLnY7XG4gICAgcmV0dXJuIChtZS5kID0gKG1lLmQgKyAzNjI0MzcgfCAwKSkgK1xuICAgICAgIChtZS52ID0gKG1lLnYgXiAobWUudiA8PCA0KSkgXiAodCBeICh0IDw8IDEpKSkgfCAwO1xuICB9O1xuXG4gIG1lLnggPSAwO1xuICBtZS55ID0gMDtcbiAgbWUueiA9IDA7XG4gIG1lLncgPSAwO1xuICBtZS52ID0gMDtcblxuICBpZiAoc2VlZCA9PT0gKHNlZWQgfCAwKSkge1xuICAgIC8vIEludGVnZXIgc2VlZC5cbiAgICBtZS54ID0gc2VlZDtcbiAgfSBlbHNlIHtcbiAgICAvLyBTdHJpbmcgc2VlZC5cbiAgICBzdHJzZWVkICs9IHNlZWQ7XG4gIH1cblxuICAvLyBNaXggaW4gc3RyaW5nIHNlZWQsIHRoZW4gZGlzY2FyZCBhbiBpbml0aWFsIGJhdGNoIG9mIDY0IHZhbHVlcy5cbiAgZm9yICh2YXIgayA9IDA7IGsgPCBzdHJzZWVkLmxlbmd0aCArIDY0OyBrKyspIHtcbiAgICBtZS54IF49IHN0cnNlZWQuY2hhckNvZGVBdChrKSB8IDA7XG4gICAgaWYgKGsgPT0gc3Ryc2VlZC5sZW5ndGgpIHtcbiAgICAgIG1lLmQgPSBtZS54IDw8IDEwIF4gbWUueCA+Pj4gNDtcbiAgICB9XG4gICAgbWUubmV4dCgpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNvcHkoZiwgdCkge1xuICB0LnggPSBmLng7XG4gIHQueSA9IGYueTtcbiAgdC56ID0gZi56O1xuICB0LncgPSBmLnc7XG4gIHQudiA9IGYudjtcbiAgdC5kID0gZi5kO1xuICByZXR1cm4gdDtcbn1cblxuZnVuY3Rpb24gaW1wbChzZWVkLCBvcHRzKSB7XG4gIHZhciB4ZyA9IG5ldyBYb3JHZW4oc2VlZCksXG4gICAgICBzdGF0ZSA9IG9wdHMgJiYgb3B0cy5zdGF0ZSxcbiAgICAgIHBybmcgPSBmdW5jdGlvbigpIHsgcmV0dXJuICh4Zy5uZXh0KCkgPj4+IDApIC8gMHgxMDAwMDAwMDA7IH07XG4gIHBybmcuZG91YmxlID0gZnVuY3Rpb24oKSB7XG4gICAgZG8ge1xuICAgICAgdmFyIHRvcCA9IHhnLm5leHQoKSA+Pj4gMTEsXG4gICAgICAgICAgYm90ID0gKHhnLm5leHQoKSA+Pj4gMCkgLyAweDEwMDAwMDAwMCxcbiAgICAgICAgICByZXN1bHQgPSAodG9wICsgYm90KSAvICgxIDw8IDIxKTtcbiAgICB9IHdoaWxlIChyZXN1bHQgPT09IDApO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG4gIHBybmcuaW50MzIgPSB4Zy5uZXh0O1xuICBwcm5nLnF1aWNrID0gcHJuZztcbiAgaWYgKHN0YXRlKSB7XG4gICAgaWYgKHR5cGVvZihzdGF0ZSkgPT0gJ29iamVjdCcpIGNvcHkoc3RhdGUsIHhnKTtcbiAgICBwcm5nLnN0YXRlID0gZnVuY3Rpb24oKSB7IHJldHVybiBjb3B5KHhnLCB7fSk7IH1cbiAgfVxuICByZXR1cm4gcHJuZztcbn1cblxuaWYgKG1vZHVsZSAmJiBtb2R1bGUuZXhwb3J0cykge1xuICBtb2R1bGUuZXhwb3J0cyA9IGltcGw7XG59IGVsc2UgaWYgKGRlZmluZSAmJiBkZWZpbmUuYW1kKSB7XG4gIGRlZmluZShmdW5jdGlvbigpIHsgcmV0dXJuIGltcGw7IH0pO1xufSBlbHNlIHtcbiAgdGhpcy54b3J3b3cgPSBpbXBsO1xufVxuXG59KShcbiAgdGhpcyxcbiAgKHR5cGVvZiBtb2R1bGUpID09ICdvYmplY3QnICYmIG1vZHVsZSwgICAgLy8gcHJlc2VudCBpbiBub2RlLmpzXG4gICh0eXBlb2YgZGVmaW5lKSA9PSAnZnVuY3Rpb24nICYmIGRlZmluZSAgIC8vIHByZXNlbnQgd2l0aCBhbiBBTUQgbG9hZGVyXG4pO1xuXG5cbiIsIi8qXG5Db3B5cmlnaHQgMjAxOSBEYXZpZCBCYXUuXG5cblBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZ1xuYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG5cIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbndpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbmRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xucGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvXG50aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cblRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG5pbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcbkVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULlxuSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTllcbkNMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsXG5UT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRVxuU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbiovXG5cbihmdW5jdGlvbiAoZ2xvYmFsLCBwb29sLCBtYXRoKSB7XG4vL1xuLy8gVGhlIGZvbGxvd2luZyBjb25zdGFudHMgYXJlIHJlbGF0ZWQgdG8gSUVFRSA3NTQgbGltaXRzLlxuLy9cblxudmFyIHdpZHRoID0gMjU2LCAgICAgICAgLy8gZWFjaCBSQzQgb3V0cHV0IGlzIDAgPD0geCA8IDI1NlxuICAgIGNodW5rcyA9IDYsICAgICAgICAgLy8gYXQgbGVhc3Qgc2l4IFJDNCBvdXRwdXRzIGZvciBlYWNoIGRvdWJsZVxuICAgIGRpZ2l0cyA9IDUyLCAgICAgICAgLy8gdGhlcmUgYXJlIDUyIHNpZ25pZmljYW50IGRpZ2l0cyBpbiBhIGRvdWJsZVxuICAgIHJuZ25hbWUgPSAncmFuZG9tJywgLy8gcm5nbmFtZTogbmFtZSBmb3IgTWF0aC5yYW5kb20gYW5kIE1hdGguc2VlZHJhbmRvbVxuICAgIHN0YXJ0ZGVub20gPSBtYXRoLnBvdyh3aWR0aCwgY2h1bmtzKSxcbiAgICBzaWduaWZpY2FuY2UgPSBtYXRoLnBvdygyLCBkaWdpdHMpLFxuICAgIG92ZXJmbG93ID0gc2lnbmlmaWNhbmNlICogMixcbiAgICBtYXNrID0gd2lkdGggLSAxLFxuICAgIG5vZGVjcnlwdG87ICAgICAgICAgLy8gbm9kZS5qcyBjcnlwdG8gbW9kdWxlLCBpbml0aWFsaXplZCBhdCB0aGUgYm90dG9tLlxuXG4vL1xuLy8gc2VlZHJhbmRvbSgpXG4vLyBUaGlzIGlzIHRoZSBzZWVkcmFuZG9tIGZ1bmN0aW9uIGRlc2NyaWJlZCBhYm92ZS5cbi8vXG5mdW5jdGlvbiBzZWVkcmFuZG9tKHNlZWQsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIHZhciBrZXkgPSBbXTtcbiAgb3B0aW9ucyA9IChvcHRpb25zID09IHRydWUpID8geyBlbnRyb3B5OiB0cnVlIH0gOiAob3B0aW9ucyB8fCB7fSk7XG5cbiAgLy8gRmxhdHRlbiB0aGUgc2VlZCBzdHJpbmcgb3IgYnVpbGQgb25lIGZyb20gbG9jYWwgZW50cm9weSBpZiBuZWVkZWQuXG4gIHZhciBzaG9ydHNlZWQgPSBtaXhrZXkoZmxhdHRlbihcbiAgICBvcHRpb25zLmVudHJvcHkgPyBbc2VlZCwgdG9zdHJpbmcocG9vbCldIDpcbiAgICAoc2VlZCA9PSBudWxsKSA/IGF1dG9zZWVkKCkgOiBzZWVkLCAzKSwga2V5KTtcblxuICAvLyBVc2UgdGhlIHNlZWQgdG8gaW5pdGlhbGl6ZSBhbiBBUkM0IGdlbmVyYXRvci5cbiAgdmFyIGFyYzQgPSBuZXcgQVJDNChrZXkpO1xuXG4gIC8vIFRoaXMgZnVuY3Rpb24gcmV0dXJucyBhIHJhbmRvbSBkb3VibGUgaW4gWzAsIDEpIHRoYXQgY29udGFpbnNcbiAgLy8gcmFuZG9tbmVzcyBpbiBldmVyeSBiaXQgb2YgdGhlIG1hbnRpc3NhIG9mIHRoZSBJRUVFIDc1NCB2YWx1ZS5cbiAgdmFyIHBybmcgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbiA9IGFyYzQuZyhjaHVua3MpLCAgICAgICAgICAgICAvLyBTdGFydCB3aXRoIGEgbnVtZXJhdG9yIG4gPCAyIF4gNDhcbiAgICAgICAgZCA9IHN0YXJ0ZGVub20sICAgICAgICAgICAgICAgICAvLyAgIGFuZCBkZW5vbWluYXRvciBkID0gMiBeIDQ4LlxuICAgICAgICB4ID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgYW5kIG5vICdleHRyYSBsYXN0IGJ5dGUnLlxuICAgIHdoaWxlIChuIDwgc2lnbmlmaWNhbmNlKSB7ICAgICAgICAgIC8vIEZpbGwgdXAgYWxsIHNpZ25pZmljYW50IGRpZ2l0cyBieVxuICAgICAgbiA9IChuICsgeCkgKiB3aWR0aDsgICAgICAgICAgICAgIC8vICAgc2hpZnRpbmcgbnVtZXJhdG9yIGFuZFxuICAgICAgZCAqPSB3aWR0aDsgICAgICAgICAgICAgICAgICAgICAgIC8vICAgZGVub21pbmF0b3IgYW5kIGdlbmVyYXRpbmcgYVxuICAgICAgeCA9IGFyYzQuZygxKTsgICAgICAgICAgICAgICAgICAgIC8vICAgbmV3IGxlYXN0LXNpZ25pZmljYW50LWJ5dGUuXG4gICAgfVxuICAgIHdoaWxlIChuID49IG92ZXJmbG93KSB7ICAgICAgICAgICAgIC8vIFRvIGF2b2lkIHJvdW5kaW5nIHVwLCBiZWZvcmUgYWRkaW5nXG4gICAgICBuIC89IDI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBsYXN0IGJ5dGUsIHNoaWZ0IGV2ZXJ5dGhpbmdcbiAgICAgIGQgLz0gMjsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIHJpZ2h0IHVzaW5nIGludGVnZXIgbWF0aCB1bnRpbFxuICAgICAgeCA+Pj49IDE7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgd2UgaGF2ZSBleGFjdGx5IHRoZSBkZXNpcmVkIGJpdHMuXG4gICAgfVxuICAgIHJldHVybiAobiArIHgpIC8gZDsgICAgICAgICAgICAgICAgIC8vIEZvcm0gdGhlIG51bWJlciB3aXRoaW4gWzAsIDEpLlxuICB9O1xuXG4gIHBybmcuaW50MzIgPSBmdW5jdGlvbigpIHsgcmV0dXJuIGFyYzQuZyg0KSB8IDA7IH1cbiAgcHJuZy5xdWljayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJjNC5nKDQpIC8gMHgxMDAwMDAwMDA7IH1cbiAgcHJuZy5kb3VibGUgPSBwcm5nO1xuXG4gIC8vIE1peCB0aGUgcmFuZG9tbmVzcyBpbnRvIGFjY3VtdWxhdGVkIGVudHJvcHkuXG4gIG1peGtleSh0b3N0cmluZyhhcmM0LlMpLCBwb29sKTtcblxuICAvLyBDYWxsaW5nIGNvbnZlbnRpb246IHdoYXQgdG8gcmV0dXJuIGFzIGEgZnVuY3Rpb24gb2YgcHJuZywgc2VlZCwgaXNfbWF0aC5cbiAgcmV0dXJuIChvcHRpb25zLnBhc3MgfHwgY2FsbGJhY2sgfHxcbiAgICAgIGZ1bmN0aW9uKHBybmcsIHNlZWQsIGlzX21hdGhfY2FsbCwgc3RhdGUpIHtcbiAgICAgICAgaWYgKHN0YXRlKSB7XG4gICAgICAgICAgLy8gTG9hZCB0aGUgYXJjNCBzdGF0ZSBmcm9tIHRoZSBnaXZlbiBzdGF0ZSBpZiBpdCBoYXMgYW4gUyBhcnJheS5cbiAgICAgICAgICBpZiAoc3RhdGUuUykgeyBjb3B5KHN0YXRlLCBhcmM0KTsgfVxuICAgICAgICAgIC8vIE9ubHkgcHJvdmlkZSB0aGUgLnN0YXRlIG1ldGhvZCBpZiByZXF1ZXN0ZWQgdmlhIG9wdGlvbnMuc3RhdGUuXG4gICAgICAgICAgcHJuZy5zdGF0ZSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gY29weShhcmM0LCB7fSk7IH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIGNhbGxlZCBhcyBhIG1ldGhvZCBvZiBNYXRoIChNYXRoLnNlZWRyYW5kb20oKSksIG11dGF0ZVxuICAgICAgICAvLyBNYXRoLnJhbmRvbSBiZWNhdXNlIHRoYXQgaXMgaG93IHNlZWRyYW5kb20uanMgaGFzIHdvcmtlZCBzaW5jZSB2MS4wLlxuICAgICAgICBpZiAoaXNfbWF0aF9jYWxsKSB7IG1hdGhbcm5nbmFtZV0gPSBwcm5nOyByZXR1cm4gc2VlZDsgfVxuXG4gICAgICAgIC8vIE90aGVyd2lzZSwgaXQgaXMgYSBuZXdlciBjYWxsaW5nIGNvbnZlbnRpb24sIHNvIHJldHVybiB0aGVcbiAgICAgICAgLy8gcHJuZyBkaXJlY3RseS5cbiAgICAgICAgZWxzZSByZXR1cm4gcHJuZztcbiAgICAgIH0pKFxuICBwcm5nLFxuICBzaG9ydHNlZWQsXG4gICdnbG9iYWwnIGluIG9wdGlvbnMgPyBvcHRpb25zLmdsb2JhbCA6ICh0aGlzID09IG1hdGgpLFxuICBvcHRpb25zLnN0YXRlKTtcbn1cblxuLy9cbi8vIEFSQzRcbi8vXG4vLyBBbiBBUkM0IGltcGxlbWVudGF0aW9uLiAgVGhlIGNvbnN0cnVjdG9yIHRha2VzIGEga2V5IGluIHRoZSBmb3JtIG9mXG4vLyBhbiBhcnJheSBvZiBhdCBtb3N0ICh3aWR0aCkgaW50ZWdlcnMgdGhhdCBzaG91bGQgYmUgMCA8PSB4IDwgKHdpZHRoKS5cbi8vXG4vLyBUaGUgZyhjb3VudCkgbWV0aG9kIHJldHVybnMgYSBwc2V1ZG9yYW5kb20gaW50ZWdlciB0aGF0IGNvbmNhdGVuYXRlc1xuLy8gdGhlIG5leHQgKGNvdW50KSBvdXRwdXRzIGZyb20gQVJDNC4gIEl0cyByZXR1cm4gdmFsdWUgaXMgYSBudW1iZXIgeFxuLy8gdGhhdCBpcyBpbiB0aGUgcmFuZ2UgMCA8PSB4IDwgKHdpZHRoIF4gY291bnQpLlxuLy9cbmZ1bmN0aW9uIEFSQzQoa2V5KSB7XG4gIHZhciB0LCBrZXlsZW4gPSBrZXkubGVuZ3RoLFxuICAgICAgbWUgPSB0aGlzLCBpID0gMCwgaiA9IG1lLmkgPSBtZS5qID0gMCwgcyA9IG1lLlMgPSBbXTtcblxuICAvLyBUaGUgZW1wdHkga2V5IFtdIGlzIHRyZWF0ZWQgYXMgWzBdLlxuICBpZiAoIWtleWxlbikgeyBrZXkgPSBba2V5bGVuKytdOyB9XG5cbiAgLy8gU2V0IHVwIFMgdXNpbmcgdGhlIHN0YW5kYXJkIGtleSBzY2hlZHVsaW5nIGFsZ29yaXRobS5cbiAgd2hpbGUgKGkgPCB3aWR0aCkge1xuICAgIHNbaV0gPSBpKys7XG4gIH1cbiAgZm9yIChpID0gMDsgaSA8IHdpZHRoOyBpKyspIHtcbiAgICBzW2ldID0gc1tqID0gbWFzayAmIChqICsga2V5W2kgJSBrZXlsZW5dICsgKHQgPSBzW2ldKSldO1xuICAgIHNbal0gPSB0O1xuICB9XG5cbiAgLy8gVGhlIFwiZ1wiIG1ldGhvZCByZXR1cm5zIHRoZSBuZXh0IChjb3VudCkgb3V0cHV0cyBhcyBvbmUgbnVtYmVyLlxuICAobWUuZyA9IGZ1bmN0aW9uKGNvdW50KSB7XG4gICAgLy8gVXNpbmcgaW5zdGFuY2UgbWVtYmVycyBpbnN0ZWFkIG9mIGNsb3N1cmUgc3RhdGUgbmVhcmx5IGRvdWJsZXMgc3BlZWQuXG4gICAgdmFyIHQsIHIgPSAwLFxuICAgICAgICBpID0gbWUuaSwgaiA9IG1lLmosIHMgPSBtZS5TO1xuICAgIHdoaWxlIChjb3VudC0tKSB7XG4gICAgICB0ID0gc1tpID0gbWFzayAmIChpICsgMSldO1xuICAgICAgciA9IHIgKiB3aWR0aCArIHNbbWFzayAmICgoc1tpXSA9IHNbaiA9IG1hc2sgJiAoaiArIHQpXSkgKyAoc1tqXSA9IHQpKV07XG4gICAgfVxuICAgIG1lLmkgPSBpOyBtZS5qID0gajtcbiAgICByZXR1cm4gcjtcbiAgICAvLyBGb3Igcm9idXN0IHVucHJlZGljdGFiaWxpdHksIHRoZSBmdW5jdGlvbiBjYWxsIGJlbG93IGF1dG9tYXRpY2FsbHlcbiAgICAvLyBkaXNjYXJkcyBhbiBpbml0aWFsIGJhdGNoIG9mIHZhbHVlcy4gIFRoaXMgaXMgY2FsbGVkIFJDNC1kcm9wWzI1Nl0uXG4gICAgLy8gU2VlIGh0dHA6Ly9nb29nbGUuY29tL3NlYXJjaD9xPXJzYStmbHVocmVyK3Jlc3BvbnNlJmJ0bklcbiAgfSkod2lkdGgpO1xufVxuXG4vL1xuLy8gY29weSgpXG4vLyBDb3BpZXMgaW50ZXJuYWwgc3RhdGUgb2YgQVJDNCB0byBvciBmcm9tIGEgcGxhaW4gb2JqZWN0LlxuLy9cbmZ1bmN0aW9uIGNvcHkoZiwgdCkge1xuICB0LmkgPSBmLmk7XG4gIHQuaiA9IGYuajtcbiAgdC5TID0gZi5TLnNsaWNlKCk7XG4gIHJldHVybiB0O1xufTtcblxuLy9cbi8vIGZsYXR0ZW4oKVxuLy8gQ29udmVydHMgYW4gb2JqZWN0IHRyZWUgdG8gbmVzdGVkIGFycmF5cyBvZiBzdHJpbmdzLlxuLy9cbmZ1bmN0aW9uIGZsYXR0ZW4ob2JqLCBkZXB0aCkge1xuICB2YXIgcmVzdWx0ID0gW10sIHR5cCA9ICh0eXBlb2Ygb2JqKSwgcHJvcDtcbiAgaWYgKGRlcHRoICYmIHR5cCA9PSAnb2JqZWN0Jykge1xuICAgIGZvciAocHJvcCBpbiBvYmopIHtcbiAgICAgIHRyeSB7IHJlc3VsdC5wdXNoKGZsYXR0ZW4ob2JqW3Byb3BdLCBkZXB0aCAtIDEpKTsgfSBjYXRjaCAoZSkge31cbiAgICB9XG4gIH1cbiAgcmV0dXJuIChyZXN1bHQubGVuZ3RoID8gcmVzdWx0IDogdHlwID09ICdzdHJpbmcnID8gb2JqIDogb2JqICsgJ1xcMCcpO1xufVxuXG4vL1xuLy8gbWl4a2V5KClcbi8vIE1peGVzIGEgc3RyaW5nIHNlZWQgaW50byBhIGtleSB0aGF0IGlzIGFuIGFycmF5IG9mIGludGVnZXJzLCBhbmRcbi8vIHJldHVybnMgYSBzaG9ydGVuZWQgc3RyaW5nIHNlZWQgdGhhdCBpcyBlcXVpdmFsZW50IHRvIHRoZSByZXN1bHQga2V5LlxuLy9cbmZ1bmN0aW9uIG1peGtleShzZWVkLCBrZXkpIHtcbiAgdmFyIHN0cmluZ3NlZWQgPSBzZWVkICsgJycsIHNtZWFyLCBqID0gMDtcbiAgd2hpbGUgKGogPCBzdHJpbmdzZWVkLmxlbmd0aCkge1xuICAgIGtleVttYXNrICYgal0gPVxuICAgICAgbWFzayAmICgoc21lYXIgXj0ga2V5W21hc2sgJiBqXSAqIDE5KSArIHN0cmluZ3NlZWQuY2hhckNvZGVBdChqKyspKTtcbiAgfVxuICByZXR1cm4gdG9zdHJpbmcoa2V5KTtcbn1cblxuLy9cbi8vIGF1dG9zZWVkKClcbi8vIFJldHVybnMgYW4gb2JqZWN0IGZvciBhdXRvc2VlZGluZywgdXNpbmcgd2luZG93LmNyeXB0byBhbmQgTm9kZSBjcnlwdG9cbi8vIG1vZHVsZSBpZiBhdmFpbGFibGUuXG4vL1xuZnVuY3Rpb24gYXV0b3NlZWQoKSB7XG4gIHRyeSB7XG4gICAgdmFyIG91dDtcbiAgICBpZiAobm9kZWNyeXB0byAmJiAob3V0ID0gbm9kZWNyeXB0by5yYW5kb21CeXRlcykpIHtcbiAgICAgIC8vIFRoZSB1c2Ugb2YgJ291dCcgdG8gcmVtZW1iZXIgcmFuZG9tQnl0ZXMgbWFrZXMgdGlnaHQgbWluaWZpZWQgY29kZS5cbiAgICAgIG91dCA9IG91dCh3aWR0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG91dCA9IG5ldyBVaW50OEFycmF5KHdpZHRoKTtcbiAgICAgIChnbG9iYWwuY3J5cHRvIHx8IGdsb2JhbC5tc0NyeXB0bykuZ2V0UmFuZG9tVmFsdWVzKG91dCk7XG4gICAgfVxuICAgIHJldHVybiB0b3N0cmluZyhvdXQpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdmFyIGJyb3dzZXIgPSBnbG9iYWwubmF2aWdhdG9yLFxuICAgICAgICBwbHVnaW5zID0gYnJvd3NlciAmJiBicm93c2VyLnBsdWdpbnM7XG4gICAgcmV0dXJuIFsrbmV3IERhdGUsIGdsb2JhbCwgcGx1Z2lucywgZ2xvYmFsLnNjcmVlbiwgdG9zdHJpbmcocG9vbCldO1xuICB9XG59XG5cbi8vXG4vLyB0b3N0cmluZygpXG4vLyBDb252ZXJ0cyBhbiBhcnJheSBvZiBjaGFyY29kZXMgdG8gYSBzdHJpbmdcbi8vXG5mdW5jdGlvbiB0b3N0cmluZyhhKSB7XG4gIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KDAsIGEpO1xufVxuXG4vL1xuLy8gV2hlbiBzZWVkcmFuZG9tLmpzIGlzIGxvYWRlZCwgd2UgaW1tZWRpYXRlbHkgbWl4IGEgZmV3IGJpdHNcbi8vIGZyb20gdGhlIGJ1aWx0LWluIFJORyBpbnRvIHRoZSBlbnRyb3B5IHBvb2wuICBCZWNhdXNlIHdlIGRvXG4vLyBub3Qgd2FudCB0byBpbnRlcmZlcmUgd2l0aCBkZXRlcm1pbmlzdGljIFBSTkcgc3RhdGUgbGF0ZXIsXG4vLyBzZWVkcmFuZG9tIHdpbGwgbm90IGNhbGwgbWF0aC5yYW5kb20gb24gaXRzIG93biBhZ2FpbiBhZnRlclxuLy8gaW5pdGlhbGl6YXRpb24uXG4vL1xubWl4a2V5KG1hdGgucmFuZG9tKCksIHBvb2wpO1xuXG4vL1xuLy8gTm9kZWpzIGFuZCBBTUQgc3VwcG9ydDogZXhwb3J0IHRoZSBpbXBsZW1lbnRhdGlvbiBhcyBhIG1vZHVsZSB1c2luZ1xuLy8gZWl0aGVyIGNvbnZlbnRpb24uXG4vL1xuaWYgKCh0eXBlb2YgbW9kdWxlKSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICBtb2R1bGUuZXhwb3J0cyA9IHNlZWRyYW5kb207XG4gIC8vIFdoZW4gaW4gbm9kZS5qcywgdHJ5IHVzaW5nIGNyeXB0byBwYWNrYWdlIGZvciBhdXRvc2VlZGluZy5cbiAgdHJ5IHtcbiAgICBub2RlY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJyk7XG4gIH0gY2F0Y2ggKGV4KSB7fVxufSBlbHNlIGlmICgodHlwZW9mIGRlZmluZSkgPT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gIGRlZmluZShmdW5jdGlvbigpIHsgcmV0dXJuIHNlZWRyYW5kb207IH0pO1xufSBlbHNlIHtcbiAgLy8gV2hlbiBpbmNsdWRlZCBhcyBhIHBsYWluIHNjcmlwdCwgc2V0IHVwIE1hdGguc2VlZHJhbmRvbSBnbG9iYWwuXG4gIG1hdGhbJ3NlZWQnICsgcm5nbmFtZV0gPSBzZWVkcmFuZG9tO1xufVxuXG5cbi8vIEVuZCBhbm9ueW1vdXMgc2NvcGUsIGFuZCBwYXNzIGluaXRpYWwgdmFsdWVzLlxufSkoXG4gIC8vIGdsb2JhbDogYHNlbGZgIGluIGJyb3dzZXJzIChpbmNsdWRpbmcgc3RyaWN0IG1vZGUgYW5kIHdlYiB3b3JrZXJzKSxcbiAgLy8gb3RoZXJ3aXNlIGB0aGlzYCBpbiBOb2RlIGFuZCBvdGhlciBlbnZpcm9ubWVudHNcbiAgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykgPyBzZWxmIDogdGhpcyxcbiAgW10sICAgICAvLyBwb29sOiBlbnRyb3B5IHBvb2wgc3RhcnRzIGVtcHR5XG4gIE1hdGggICAgLy8gbWF0aDogcGFja2FnZSBjb250YWluaW5nIHJhbmRvbSwgcG93LCBhbmQgc2VlZHJhbmRvbVxuKTtcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0aWQ6IG1vZHVsZUlkLFxuXHRcdGxvYWRlZDogZmFsc2UsXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuXHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18uYW1kRCA9IGZ1bmN0aW9uICgpIHtcblx0dGhyb3cgbmV3IEVycm9yKCdkZWZpbmUgY2Fubm90IGJlIHVzZWQgaW5kaXJlY3QnKTtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5hbWRPID0ge307IiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5ubWQgPSAobW9kdWxlKSA9PiB7XG5cdG1vZHVsZS5wYXRocyA9IFtdO1xuXHRpZiAoIW1vZHVsZS5jaGlsZHJlbikgbW9kdWxlLmNoaWxkcmVuID0gW107XG5cdHJldHVybiBtb2R1bGU7XG59OyIsImltcG9ydCBzZWVkcmFuZG9tIGZyb20gXCJzZWVkcmFuZG9tXCI7XG5cbmZ1bmN0aW9uIGdlbmVyYXRlTWFwKHdpZHRoLCBoZWlnaHQsIHNlZWQpIHtcbiAgY29uc3QgcmFuZG9tID0gc2VlZHJhbmRvbShcbiAgICBzZWVkIHx8IHdpbmRvdy5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50MzJBcnJheSgxKSlbMF0udG9TdHJpbmcoKVxuICApO1xuXG4gIGNvbnN0IHJvb3RSb29tID0geyB4OiAwLCB5OiAwLCB3aWR0aCwgaGVpZ2h0IH07XG5cbiAgLy8gQmluYXJ5IFNwYWNlIFBhcnRpdGlvbmluZ1xuICBjb25zdCByb29tcyA9IFtdO1xuICBjb25zdCBsaW5lcyA9IFtdO1xuICBjb25zdCBwYXJ0aXRpb24gPSAocm9vbSkgPT4ge1xuICAgIGlmIChyb29tLndpZHRoIDwgMjAgfHwgcm9vbS5oZWlnaHQgPCAyMCkge1xuICAgICAgcm9vbXMucHVzaChyb29tKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgeyBsZWZ0Um9vbSwgcmlnaHRSb29tLCBsaW5lIH0gPSBwYXJ0aXRpb25Sb29tKHJvb20sIHJhbmRvbSk7XG4gICAgICBwYXJ0aXRpb24obGVmdFJvb20pO1xuICAgICAgcGFydGl0aW9uKHJpZ2h0Um9vbSk7XG4gICAgICByb29tcy5wdXNoKGxlZnRSb29tLCByaWdodFJvb20pO1xuICAgICAgbGluZXMucHVzaChsaW5lKTtcbiAgICB9XG4gIH07XG4gIHBhcnRpdGlvbihyb290Um9vbSk7XG5cbiAgY29uc3QgbWFwID0gQXJyYXkoaGVpZ2h0KVxuICAgIC5maWxsKClcbiAgICAubWFwKCgpID0+IEFycmF5KHdpZHRoKS5maWxsKDEpKTtcblxuICByb29tcy5mb3JFYWNoKChyb29tKSA9PiB7XG4gICAgZm9yIChsZXQgeSA9IHJvb20ueSArIDE7IHkgPCByb29tLnkgKyByb29tLmhlaWdodCAtIDE7IHkrKykge1xuICAgICAgZm9yIChsZXQgeCA9IHJvb20ueCArIDE7IHggPCByb29tLnggKyByb29tLndpZHRoIC0gMTsgeCsrKSB7XG4gICAgICAgIG1hcFt5XVt4XSA9IDA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY3ggPSBNYXRoLmZsb29yKHJvb20ueCArIHJvb20ud2lkdGggLyAyKTtcbiAgICBjb25zdCBjeSA9IE1hdGguZmxvb3Iocm9vbS55ICsgcm9vbS5oZWlnaHQgLyAyKTtcbiAgICBtYXBbY3ldW2N4XSA9IDI7XG4gIH0pO1xuXG4gIGxpbmVzLmZvckVhY2goKGxpbmUpID0+IHtcbiAgICBjb25zdCB7IHN0YXJ0LCBlbmQgfSA9IGxpbmU7XG4gICAgaWYgKHN0YXJ0LnggPT09IGVuZC54KSB7XG4gICAgICBmb3IgKGxldCB5ID0gc3RhcnQueTsgeSA8IGVuZC55OyB5KyspIHtcbiAgICAgICAgbWFwW3ldW3N0YXJ0LnhdID0gMTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgeCA9IHN0YXJ0Lng7IHggPCBlbmQueDsgeCsrKSB7XG4gICAgICAgIG1hcFtzdGFydC55XVt4XSA9IDE7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gbWFwO1xufVxuXG5mdW5jdGlvbiBwYXJ0aXRpb25Sb29tKHJvb20sIHJhbmRvbSkge1xuICBjb25zdCBpc1ZlcnRpY2FsID0gcmFuZG9tKCkgPCAwLjU7XG5cbiAgY29uc3Qgc3BsaXRQb2ludCA9IHtcbiAgICB4OiBNYXRoLmZsb29yKHJvb20ueCArIHJvb20ud2lkdGggKiByYW5kb20oKSksXG4gICAgeTogTWF0aC5mbG9vcihyb29tLnkgKyByb29tLmhlaWdodCAqIHJhbmRvbSgpKSxcbiAgfTtcblxuICBjb25zdCBsZWZ0Um9vbSA9IHtcbiAgICB4OiByb29tLngsXG4gICAgeTogcm9vbS55LFxuICAgIHdpZHRoOiBpc1ZlcnRpY2FsID8gc3BsaXRQb2ludC54IC0gcm9vbS54IDogcm9vbS53aWR0aCxcbiAgICBoZWlnaHQ6IGlzVmVydGljYWwgPyByb29tLmhlaWdodCA6IHNwbGl0UG9pbnQueSAtIHJvb20ueSxcbiAgfTtcbiAgY29uc3QgcmlnaHRSb29tID0ge1xuICAgIHg6IGlzVmVydGljYWwgPyBzcGxpdFBvaW50LnggOiByb29tLngsXG4gICAgeTogaXNWZXJ0aWNhbCA/IHJvb20ueSA6IHNwbGl0UG9pbnQueSxcbiAgICB3aWR0aDogaXNWZXJ0aWNhbCA/IHJvb20ueCArIHJvb20ud2lkdGggLSBzcGxpdFBvaW50LnggOiByb29tLndpZHRoLFxuICAgIGhlaWdodDogaXNWZXJ0aWNhbCA/IHJvb20uaGVpZ2h0IDogcm9vbS55ICsgcm9vbS5oZWlnaHQgLSBzcGxpdFBvaW50LnksXG4gIH07XG4gIGNvbnN0IGxpbmUgPSB7XG4gICAgc3RhcnQ6IHsgeDogc3BsaXRQb2ludC54LCB5OiBzcGxpdFBvaW50LnkgfSxcbiAgICBlbmQ6IHtcbiAgICAgIHg6IGlzVmVydGljYWwgPyBzcGxpdFBvaW50LnggOiBzcGxpdFBvaW50LnggKyAxLFxuICAgICAgeTogaXNWZXJ0aWNhbCA/IHNwbGl0UG9pbnQueSArIDEgOiBzcGxpdFBvaW50LnksXG4gICAgfSxcbiAgfTtcblxuICByZXR1cm4geyBsZWZ0Um9vbSwgcmlnaHRSb29tLCBsaW5lIH07XG59XG5cbmNvbnN0IG1hcCA9IGdlbmVyYXRlTWFwKDUwLCA1MCwgXCJzZWVkXCIpO1xuY29uc29sZS5sb2cobWFwKTtcblxuY29uc3QgbGV2ZWxzID0gW1xuICB7XG4gICAgaWQ6IDAsXG4gICAgbmFtZTogXCJGaXJzdCBsZXZlbFwiLFxuICAgIFwibWFwXCI6IG1hcCxcbiAgfSxcbl07XG5cbmV4cG9ydCBkZWZhdWx0IGxldmVscztcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBlcnNvbiB7XG4gICAgY29uc3RydWN0b3IoaWQpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLnBvcyA9IHsgeDogMCwgeTogMCB9O1xuICAgICAgICB0aGlzLnNwZWVkID0gMDtcbiAgICAgICAgdGhpcy5tb3ZlU3BlZWQgPSAwO1xuICAgICAgICB0aGlzLnJvdGF0aW9uID0gMDtcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSB7IHg6IDAsIHk6IDAgfTtcbiAgICAgICAgdGhpcy5yb3RhdGlvblNwZWVkID0gMDtcbiAgICB9XG59XG4iLCJpbXBvcnQgUGVyc29uIGZyb20gXCIuL3BlcnNvblwiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGxheWVyIGV4dGVuZHMgUGVyc29uIHtcbiAgICBjb25zdHJ1Y3RvcihpZCkge1xuICAgICAgICBzdXBlcihpZCk7XG4gICAgICAgIHRoaXMuaXNTdHJhZmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMucG9zID0geyB4OiAxNiwgeTogMTAgfTtcbiAgICAgICAgdGhpcy5zcGVlZCA9IDA7XG4gICAgICAgIHRoaXMubW92ZVNwZWVkID0gMC4wMDU7XG4gICAgICAgIHRoaXMucm90YXRpb24gPSAwO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IHsgeDogMCwgeTogMCB9O1xuICAgICAgICB0aGlzLnJvdGF0aW9uU3BlZWQgPSAoMSAqIE1hdGguUEkpIC8gMzYwO1xuICAgIH1cbn1cbiIsImNsYXNzIEhVRCB7XG4gICAgY29uc3RydWN0b3Iod2lkdGgsIGhlaWdodCkge1xuICAgICAgICB0aGlzLl9jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgICAgICB0aGlzLl9jYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy5fY2FudmFzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgdGhpcy5fY2FudmFzLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgICB0aGlzLl9jYW52YXMuc3R5bGUudG9wID0gXCIwXCI7XG4gICAgICAgIHRoaXMuX2NhbnZhcy5zdHlsZS5sZWZ0ID0gXCIwXCI7XG4gICAgICAgIHRoaXMuX2NhbnZhcy5pZCA9IFwiaHVkXCI7XG4gICAgICAgIHRoaXMuX2N0eCA9IHRoaXMuX2NhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICAgIHRoaXMucmVuZGVyQ3Jvc3NoYWlyKCk7XG4gICAgfVxuICAgIGdldCBjYW52YXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYW52YXM7XG4gICAgfVxuICAgIGdldCBjdHgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jdHg7XG4gICAgfVxuICAgIHJlbmRlckNyb3NzaGFpcigpIHtcbiAgICAgICAgdGhpcy5fY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICB0aGlzLl9jdHgubW92ZVRvKHRoaXMuY2FudmFzLndpZHRoIC8gMiwgdGhpcy5fY2FudmFzLmhlaWdodCAvIDIpO1xuICAgICAgICB0aGlzLl9jdHgubGluZVRvKHRoaXMuX2NhbnZhcy53aWR0aCAvIDIgKyAxMCwgdGhpcy5fY2FudmFzLmhlaWdodCAvIDIpO1xuICAgICAgICB0aGlzLl9jdHgubW92ZVRvKHRoaXMuX2NhbnZhcy53aWR0aCAvIDIsIHRoaXMuX2NhbnZhcy5oZWlnaHQgLyAyKTtcbiAgICAgICAgdGhpcy5fY3R4LmxpbmVUbyh0aGlzLl9jYW52YXMud2lkdGggLyAyIC0gMTAsIHRoaXMuX2NhbnZhcy5oZWlnaHQgLyAyKTtcbiAgICAgICAgdGhpcy5fY3R4Lm1vdmVUbyh0aGlzLl9jYW52YXMud2lkdGggLyAyLCB0aGlzLl9jYW52YXMuaGVpZ2h0IC8gMik7XG4gICAgICAgIHRoaXMuX2N0eC5saW5lVG8odGhpcy5fY2FudmFzLndpZHRoIC8gMiwgdGhpcy5fY2FudmFzLmhlaWdodCAvIDIgKyAxMCk7XG4gICAgICAgIHRoaXMuX2N0eC5tb3ZlVG8odGhpcy5fY2FudmFzLndpZHRoIC8gMiwgdGhpcy5fY2FudmFzLmhlaWdodCAvIDIpO1xuICAgICAgICB0aGlzLl9jdHgubGluZVRvKHRoaXMuX2NhbnZhcy53aWR0aCAvIDIsIHRoaXMuX2NhbnZhcy5oZWlnaHQgLyAyIC0gMTApO1xuICAgICAgICB0aGlzLl9jdHguc3Ryb2tlU3R5bGUgPSBcInJlZFwiO1xuICAgICAgICB0aGlzLl9jdHguc3Ryb2tlKCk7XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVuZGVyZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnN0cmlwV2lkdGggPSAyO1xuICAgICAgICB0aGlzLnNjcmVlblN0cmlwcyA9IFtdO1xuICAgICAgICB0aGlzLnNjcmVlbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMud2lkdGggPSAzMjA7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMjAwO1xuICAgICAgICB0aGlzLnNjcmVlbi5pZCA9IFwic2NyZWVuXCI7XG4gICAgICAgIHRoaXMuc2t5Ym94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5wcmVwZW5kKHRoaXMuc2NyZWVuKTtcbiAgICAgICAgLy8gVE9ETzogZW5hYmxlIHJlc2l6aW5nIHdoZW4gY2FudmFzIHJlbmRlcmVyIGlzIGltcGxlbWVudGVkXG4gICAgICAgIC8vd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgfVxuICAgIG9uUmVzaXplKCkge1xuICAgICAgICBjb25zdCBhc3BlY3RSYXRpbyA9IHRoaXMud2lkdGggLyB0aGlzLmhlaWdodDtcbiAgICAgICAgY29uc3QgbmV3V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgY29uc3QgbmV3SGVpZ2h0ID0gbmV3V2lkdGggLyBhc3BlY3RSYXRpbztcbiAgICAgICAgdGhpcy5zY3JlZW4uc3R5bGUud2lkdGggPSBuZXdXaWR0aCArIFwicHhcIjtcbiAgICAgICAgdGhpcy5zY3JlZW4uc3R5bGUuaGVpZ2h0ID0gbmV3SGVpZ2h0ICsgXCJweFwiO1xuICAgIH1cbiAgICBpbml0KCkge1xuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9IFwibm9uZVwiO1xuICAgICAgICBjb25zdCBodWQgPSBuZXcgSFVEKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcbiAgICAgICAgY29uc3QgZmxvb3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBmbG9vci5pZCA9IFwiZmxvb3JcIjtcbiAgICAgICAgdGhpcy5za3lib3guaWQgPSBcImNlaWxpbmdcIjtcbiAgICAgICAgY29uc3QgbGV2ZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBsZXZlbC5pZCA9IFwibGV2ZWxcIjtcbiAgICAgICAgY29uc3QgaGFuZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGhhbmQuaWQgPSBcImhhbmRcIjtcbiAgICAgICAgdGhpcy5zY3JlZW4uYXBwZW5kQ2hpbGQoZmxvb3IpO1xuICAgICAgICB0aGlzLnNjcmVlbi5hcHBlbmRDaGlsZCh0aGlzLnNreWJveCk7XG4gICAgICAgIHRoaXMuc2NyZWVuLmFwcGVuZENoaWxkKGxldmVsKTtcbiAgICAgICAgdGhpcy5zY3JlZW4uYXBwZW5kQ2hpbGQoaGFuZCk7XG4gICAgICAgIHRoaXMuc2NyZWVuLmFwcGVuZENoaWxkKGh1ZC5jYW52YXMpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMud2lkdGg7IGkgKz0gdGhpcy5zdHJpcFdpZHRoKSB7XG4gICAgICAgICAgICBjb25zdCBzdHJpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBzdHJpcC5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICAgICAgICAgIHN0cmlwLnN0eWxlLmxlZnQgPSBpICsgXCJweFwiO1xuICAgICAgICAgICAgc3RyaXAuc3R5bGUud2lkdGggPSB0aGlzLnN0cmlwV2lkdGggKyBcInB4XCI7XG4gICAgICAgICAgICBzdHJpcC5zdHlsZS5oZWlnaHQgPSBcIjBweFwiO1xuICAgICAgICAgICAgc3RyaXAuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuICAgICAgICAgICAgc3RyaXAuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJtYWdlbnRhXCI7XG4gICAgICAgICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgIGltZy5zcmMgPSBcInB1YmxpYy90ZXh0dXJlcy5wbmdcIjtcbiAgICAgICAgICAgIGltZy5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICAgICAgICAgIGltZy5zdHlsZS5sZWZ0ID0gXCIwcHhcIjtcbiAgICAgICAgICAgIHN0cmlwLmFwcGVuZENoaWxkKGltZyk7XG4gICAgICAgICAgICAvLyBBc3NpZ24gdGhlIGltYWdlIHRvIGEgcHJvcGVydHkgb24gdGhlIHN0cmlwIGVsZW1lbnRcbiAgICAgICAgICAgIC8vIHNvIHdlIGhhdmUgZWFzeSBhY2Nlc3MgdG8gdGhlIGltYWdlIGxhdGVyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBzdHJpcC5pbWcgPSBpbWc7XG4gICAgICAgICAgICB0aGlzLnNjcmVlblN0cmlwcy5wdXNoKHN0cmlwKTtcbiAgICAgICAgICAgIGxldmVsLmFwcGVuZENoaWxkKHN0cmlwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkcmF3UmF5KCkgeyB9XG4gICAgY2FzdFNpbmdsZVJheSgpIHsgfVxuICAgIGRyYXdNaW5pTWFwKCkgeyB9XG4gICAgdXBkYXRlTWluaU1hcCgpIHsgfVxufVxuIiwiY2xhc3MgQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IoZ2FtZSkge1xuICAgICAgICB0aGlzLmtleXNQcmVzc2VkID0ge307XG4gICAgICAgIHRoaXMuZ2FtZSA9IGdhbWU7XG4gICAgICAgIHRoaXMuZW5hYmxlUG9pbnRlckxvY2soKTtcbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgfVxuICAgIGlzS2V5UHJlc3NlZChrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5c1ByZXNzZWRba2V5XTtcbiAgICB9XG4gICAgb25LZXlkb3duKGUpIHtcbiAgICAgICAgc3dpdGNoIChlLmNvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJLZXlXXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5rZXlzUHJlc3NlZFtlLmNvZGVdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJLZXlTXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5rZXlzUHJlc3NlZFtlLmNvZGVdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJLZXlBXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5rZXlzUHJlc3NlZFtlLmNvZGVdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJLZXlEXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5rZXlzUHJlc3NlZFtlLmNvZGVdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJTaGlmdExlZnRcIjpcbiAgICAgICAgICAgICAgICB0aGlzLmtleXNQcmVzc2VkW2UuY29kZV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uS2V5dXAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgc3dpdGNoIChlLmNvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJLZXlXXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5rZXlzUHJlc3NlZFtlLmNvZGVdID0gZmFsc2U7XG4gICAgICAgICAgICBjYXNlIFwiS2V5U1wiOlxuICAgICAgICAgICAgICAgIHRoaXMua2V5c1ByZXNzZWRbZS5jb2RlXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIktleUFcIjpcbiAgICAgICAgICAgICAgICB0aGlzLmtleXNQcmVzc2VkW2UuY29kZV0gPSBmYWxzZTtcbiAgICAgICAgICAgIGNhc2UgXCJLZXlEXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5rZXlzUHJlc3NlZFtlLmNvZGVdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiU2hpZnRMZWZ0XCI6XG4gICAgICAgICAgICAgICAgdGhpcy5rZXlzUHJlc3NlZFtlLmNvZGVdID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZW5hYmxlUG9pbnRlckxvY2soKSB7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZXF1ZXN0UG9pbnRlckxvY2soKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmUuYmluZCh0aGlzKSk7XG4gICAgfVxuICAgIG9uTW91c2VNb3ZlKGUpIHtcbiAgICAgICAgY29uc3Qgcm90YXRpb25DaGFuZ2UgPSBlLm1vdmVtZW50WCAqIHRoaXMuZ2FtZS5wbGF5ZXIucm90YXRpb25TcGVlZDtcbiAgICAgICAgdGhpcy5nYW1lLnBsYXllci5yb3RhdGlvbiArPSByb3RhdGlvbkNoYW5nZTtcbiAgICB9XG4gICAgaW5pdCgpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJDb250cm9sbGVyIGluaXRpYWxpemVkXCIpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5vbktleWRvd24uYmluZCh0aGlzKSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5vbktleXVwLmJpbmQodGhpcykpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLm9uTW91c2VNb3ZlLmJpbmQodGhpcykpO1xuICAgIH1cbiAgICB1cGRhdGUoZHQpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNLZXlQcmVzc2VkKFwiS2V5V1wiKSkge1xuICAgICAgICAgICAgdGhpcy5nYW1lLnBsYXllci5zcGVlZCA9IDE7XG4gICAgICAgICAgICB0aGlzLmdhbWUucGxheWVyLmRpcmVjdGlvbi55ID0gLTE7XG4gICAgICAgICAgICAvL2hhbmQuc3R5bGUuYW5pbWF0aW9uID0gXCJ3YWxrIDEuNXMgaW5maW5pdGVcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc0tleVByZXNzZWQoXCJLZXlTXCIpKSB7XG4gICAgICAgICAgICB0aGlzLmdhbWUucGxheWVyLnNwZWVkID0gLTE7XG4gICAgICAgICAgICB0aGlzLmdhbWUucGxheWVyLmRpcmVjdGlvbi55ID0gMTtcbiAgICAgICAgICAgIC8vaGFuZC5zdHlsZS5hbmltYXRpb24gPSBcIndhbGsgMS41cyBpbmZpbml0ZVwiO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzS2V5UHJlc3NlZChcIktleUFcIikpIHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5wbGF5ZXIuZGlyZWN0aW9uLnggPSAxO1xuICAgICAgICAgICAgdGhpcy5nYW1lLnBsYXllci5zcGVlZCA9IC0xO1xuICAgICAgICAgICAgLy9oYW5kLnN0eWxlLmFuaW1hdGlvbiA9IFwid2FsayAxLjVzIGluZmluaXRlXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNLZXlQcmVzc2VkKFwiS2V5RFwiKSkge1xuICAgICAgICAgICAgdGhpcy5nYW1lLnBsYXllci5kaXJlY3Rpb24ueCA9IC0xO1xuICAgICAgICAgICAgdGhpcy5nYW1lLnBsYXllci5zcGVlZCA9IDE7XG4gICAgICAgICAgICAvL2hhbmQuc3R5bGUuYW5pbWF0aW9uID0gXCJ3YWxrIDEuNXMgaW5maW5pdGVcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc0tleVByZXNzZWQoXCJTaGlmdExlZnRcIikpIHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5wbGF5ZXIuc3BlZWQgKj0gMjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc0tleVByZXNzZWQoXCJTcGFjZVwiKSkge1xuICAgICAgICAgICAgdGhpcy5nYW1lLnBsYXllci5zcGVlZCA9IDA7XG4gICAgICAgICAgICB0aGlzLmdhbWUucGxheWVyLmRpcmVjdGlvbi55ID0gMDtcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5wbGF5ZXIuZGlyZWN0aW9uLnggPSAwO1xuICAgICAgICAgICAgLy9oYW5kLnN0eWxlLmFuaW1hdGlvbiA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYga2V5IG5vdCBwcmVzc2VkLCBzdG9wIG1vdmluZ1xuICAgICAgICBpZiAoIXRoaXMuaXNLZXlQcmVzc2VkKFwiS2V5V1wiKSAmJiAhdGhpcy5pc0tleVByZXNzZWQoXCJLZXlTXCIpKSB7XG4gICAgICAgICAgICB0aGlzLmdhbWUucGxheWVyLmRpcmVjdGlvbi55ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaXNLZXlQcmVzc2VkKFwiS2V5QVwiKSAmJiAhdGhpcy5pc0tleVByZXNzZWQoXCJLZXlEXCIpKSB7XG4gICAgICAgICAgICB0aGlzLmdhbWUucGxheWVyLmRpcmVjdGlvbi54ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaXNLZXlQcmVzc2VkKFwiU2hpZnRMZWZ0XCIpKSB7XG4gICAgICAgICAgICB0aGlzLmdhbWUucGxheWVyLnNwZWVkIC89IDI7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBDb250cm9sbGVyO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXNzZXRMb2FkZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgIH1cbiAgICBhc3luYyBsb2FkQXNzZXRzKHBhdGhzKSB7XG4gICAgICAgIGNvbnN0IGFzc2V0cyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IHBhdGggb2YgcGF0aHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGFzc2V0ID0gYXdhaXQgdGhpcy5sb2FkQXNzZXQocGF0aCk7XG4gICAgICAgICAgICBhc3NldHNbcGF0aF0gPSBhc3NldDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXNzZXRzO1xuICAgIH1cbiAgICBhc3luYyBsb2FkQXNzZXQocGF0aCkge1xuICAgICAgICBjb25zdCB0eXBlID0gcGF0aC5zcGxpdCgnLicpLnBvcCgpO1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ3BuZyc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMubG9hZEltYWdlKHBhdGgpO1xuICAgICAgICAgICAgY2FzZSAndHh0JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5sb2FkVGV4dChwYXRoKTtcbiAgICAgICAgICAgIGNhc2UgJ2pzb24nOlxuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmxvYWRKU09OKHBhdGgpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gYXNzZXQgdHlwZTogJHt0eXBlfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGxvYWRJbWFnZShwYXRoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgIGltZy5zcmMgPSBwYXRoO1xuICAgICAgICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHJlc29sdmUoaW1nKTtcbiAgICAgICAgICAgIGltZy5vbmVycm9yID0gcmVqZWN0O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgbG9hZFRleHQocGF0aCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBmZXRjaChwYXRoKTtcbiAgICAgICAgICAgIGNvbnN0IHRleHQgPSByZXNwb25zZS50aGVuKChyZXMpID0+IHJlcy50ZXh0KCkpO1xuICAgICAgICAgICAgcmVzb2x2ZSh0ZXh0KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGxvYWRKU09OKHBhdGgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gZmV0Y2gocGF0aCk7XG4gICAgICAgICAgICBjb25zdCBqc29uID0gcmVzcG9uc2UudGhlbigocmVzKSA9PiByZXMuanNvbigpKTtcbiAgICAgICAgICAgIHJlc29sdmUoanNvbik7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsIi8vQHRzLWlnbm9yZVxuaW1wb3J0IGxldmVscyBmcm9tIFwiLi9sZXZlbHMuanNcIjtcbmltcG9ydCBQbGF5ZXIgZnJvbSBcIi4vcGxheWVyXCI7XG5pbXBvcnQgUmVuZGVyZXIgZnJvbSBcIi4vcmVuZGVyZXJcIjtcbmltcG9ydCBDb250cm9sbGVyIGZyb20gXCIuL2NvbnRyb2xsZXJcIjtcbmltcG9ydCBBc3NldExvYWRlciBmcm9tIFwiLi9hc3NldC1sb2FkZXJcIjtcbnZhciBHYW1lU3RhdGU7XG4oZnVuY3Rpb24gKEdhbWVTdGF0ZSkge1xuICAgIEdhbWVTdGF0ZVtHYW1lU3RhdGVbXCJQbGF5aW5nXCJdID0gMF0gPSBcIlBsYXlpbmdcIjtcbiAgICBHYW1lU3RhdGVbR2FtZVN0YXRlW1wiR2FtZU92ZXJcIl0gPSAxXSA9IFwiR2FtZU92ZXJcIjtcbiAgICBHYW1lU3RhdGVbR2FtZVN0YXRlW1wiUGF1c2VkXCJdID0gMl0gPSBcIlBhdXNlZFwiO1xuICAgIEdhbWVTdGF0ZVtHYW1lU3RhdGVbXCJJbnZlbnRvcnlcIl0gPSAzXSA9IFwiSW52ZW50b3J5XCI7XG4gICAgR2FtZVN0YXRlW0dhbWVTdGF0ZVtcIlRyYWRpbmdcIl0gPSA0XSA9IFwiVHJhZGluZ1wiO1xuICAgIEdhbWVTdGF0ZVtHYW1lU3RhdGVbXCJNYWluTWVudVwiXSA9IDVdID0gXCJNYWluTWVudVwiO1xufSkoR2FtZVN0YXRlIHx8IChHYW1lU3RhdGUgPSB7fSkpO1xuY29uc3QgbWluaU1hcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWluaU1hcFwiKTtcbmNvbnN0IG1pbmlNYXBPYmplY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtaW5pTWFwT2JqZWN0c1wiKTtcbmxldCBtaW5pTWFwU2NhbGUgPSA0O1xubGV0IGxhc3RUaW1lID0gMDtcbmNvbnN0IHNjcmVlbldpZHRoID0gMzIwO1xuY29uc3Qgc2NyZWVuSGVpZ2h0ID0gMjAwO1xuY29uc3Qgc3RyaXBXaWR0aCA9IDI7XG5jb25zdCBmb3YgPSAoNjAgKiBNYXRoLlBJKSAvIDE4MDtcbmNvbnN0IGZvdkhhbGYgPSBmb3YgLyAxLjU7XG5jb25zdCBudW1SYXlzID0gTWF0aC5jZWlsKHNjcmVlbldpZHRoIC8gc3RyaXBXaWR0aCk7XG5jb25zdCB2aWV3RGlzdCA9IHNjcmVlbldpZHRoIC8gMiAvIE1hdGgudGFuKGZvdkhhbGYpO1xuY29uc3QgdHdvUEkgPSBNYXRoLlBJICogMjtcbmNvbnN0IG51bVRleHR1cmVzID0gNTEyIC8gODtcbmxldCB2aXNpYmxlU3ByaXRlcyA9IFtdO1xubGV0IHRpY2tDb3VudCA9IDA7XG5sZXQgc3ByaXRlTWFwID0gW107XG5sZXQgbWFwSXRlbXMgPSBbXTtcbmxldCBpdGVtVHlwZXMgPSBbXTtcbmxldCBlbmVteVR5cGVzID0gW107XG5jb25zdCBkZWJ1Z1NjcmVlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVidWdTY3JlZW5cIik7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFwibWFpbm1lbnVcIjtcbiAgICAgICAgdGhpcy5tYXBXaWR0aCA9IDA7XG4gICAgICAgIHRoaXMubWFwSGVpZ2h0ID0gMDtcbiAgICAgICAgdGhpcy5kYXlUaW1lID0gMDsgLy8gMCAtIDIzXG4gICAgICAgIHRoaXMuZHJhd01pbmlNYXAgPSAoKSA9PiB7XG4gICAgICAgICAgICBtaW5pTWFwLndpZHRoID0gdGhpcy5tYXBXaWR0aCAqIG1pbmlNYXBTY2FsZTtcbiAgICAgICAgICAgIG1pbmlNYXAuaGVpZ2h0ID0gdGhpcy5tYXBIZWlnaHQgKiBtaW5pTWFwU2NhbGU7XG4gICAgICAgICAgICBtaW5pTWFwLnN0eWxlLndpZHRoID0gYCR7dGhpcy5tYXBXaWR0aCAqIG1pbmlNYXBTY2FsZX1weGA7XG4gICAgICAgICAgICBjb25zdCBjdHggPSBtaW5pTWFwLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgdGhpcy5tYXBIZWlnaHQ7IHkrKykge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGhpcy5tYXBXaWR0aDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmxldmVsLm1hcFt5XVt4XSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBcImJsYWNrXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoeCAqIG1pbmlNYXBTY2FsZSwgeSAqIG1pbmlNYXBTY2FsZSwgbWluaU1hcFNjYWxlLCBtaW5pTWFwU2NhbGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnVwZGF0ZU1pbmlNYXAgPSAoKSA9PiB7XG4gICAgICAgICAgICBtaW5pTWFwT2JqZWN0cy53aWR0aCA9IHRoaXMubWFwV2lkdGggKiBtaW5pTWFwU2NhbGU7XG4gICAgICAgICAgICBtaW5pTWFwT2JqZWN0cy5oZWlnaHQgPSB0aGlzLm1hcEhlaWdodCAqIG1pbmlNYXBTY2FsZTtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IG1pbmlNYXBPYmplY3RzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgbWluaU1hcC53aWR0aCwgbWluaU1hcC5oZWlnaHQpO1xuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwieWVsbG93Z3JlZW5cIjtcbiAgICAgICAgICAgIGN0eC5maWxsUmVjdCh0aGlzLnBsYXllci5wb3MueCAqIG1pbmlNYXBTY2FsZSAtIDIsIHRoaXMucGxheWVyLnBvcy55ICogbWluaU1hcFNjYWxlIC0gMiwgNCwgNCk7XG4gICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBjdHgubW92ZVRvKHRoaXMucGxheWVyLnBvcy54ICogbWluaU1hcFNjYWxlLCB0aGlzLnBsYXllci5wb3MueSAqIG1pbmlNYXBTY2FsZSk7XG4gICAgICAgICAgICBjdHgubGluZVRvKCh0aGlzLnBsYXllci5wb3MueCArIE1hdGguY29zKHRoaXMucGxheWVyLnJvdGF0aW9uKSAqIDQpICogbWluaU1hcFNjYWxlLCAodGhpcy5wbGF5ZXIucG9zLnkgKyBNYXRoLnNpbih0aGlzLnBsYXllci5yb3RhdGlvbikgKiA0KSAqIG1pbmlNYXBTY2FsZSk7XG4gICAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYXNzZXRMb2FkZXIgPSBuZXcgQXNzZXRMb2FkZXIoKTtcbiAgICAgICAgdGhpcy5wbGF5ZXIgPSBuZXcgUGxheWVyKFwicGxheWVyXCIpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gbmV3IFJlbmRlcmVyKCk7XG4gICAgICAgIHRoaXMuY29udHJvbGxlciA9IG5ldyBDb250cm9sbGVyKHRoaXMpO1xuICAgICAgICB0aGlzLnN0YXRlID0gXCJtYWlubWVudVwiO1xuICAgICAgICB0aGlzLmxldmVsID0gbGV2ZWxzWzBdO1xuICAgICAgICB0aGlzLmFzc2V0TG9hZGVyLmxvYWRBc3NldHMoW1xuICAgICAgICAgICAgXCJwdWJsaWMvdGV4dHVyZXMucG5nXCIsXG4gICAgICAgIF0pXG4gICAgICAgICAgICAudGhlbigoYXNzZXRzKSA9PiB7IHRoaXMuc2V0dXAoYXNzZXRzKTsgfSk7XG4gICAgfVxuICAgIGluaXRTcHJpdGVzKCkge1xuICAgICAgICBzcHJpdGVNYXAgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmxldmVsLm1hcC5sZW5ndGg7IHkrKykge1xuICAgICAgICAgICAgc3ByaXRlTWFwW3ldID0gW107XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXBJdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHNwcml0ZSA9IG1hcEl0ZW1zW2ldO1xuICAgICAgICAgICAgdmFyIGl0ZW1UeXBlID0gaXRlbVR5cGVzW3Nwcml0ZS50eXBlXTtcbiAgICAgICAgICAgIHZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgICAgICAgICAgaW1nLnNyYyA9IGl0ZW1UeXBlLmltZztcbiAgICAgICAgICAgIGltZy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICBpbWcuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgICAgICAgICBzcHJpdGUudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgc3ByaXRlLmJsb2NrID0gaXRlbVR5cGUuYmxvY2s7XG4gICAgICAgICAgICBzcHJpdGUuaW1nID0gaW1nO1xuICAgICAgICAgICAgc3ByaXRlTWFwW3Nwcml0ZS55XVtzcHJpdGUueF0gPSBzcHJpdGU7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNjcmVlbi5hcHBlbmRDaGlsZChpbWcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlzQmxvY2tpbmcoeCwgeSkge1xuICAgICAgICBpZiAoeSA8IDAgfHwgeSA+PSB0aGlzLm1hcEhlaWdodCB8fCB4IDwgMCB8fCB4ID49IHRoaXMubWFwV2lkdGgpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgdmFyIGl4ID0gTWF0aC5mbG9vcih4KTtcbiAgICAgICAgdmFyIGl5ID0gTWF0aC5mbG9vcih5KTtcbiAgICAgICAgLy8gcmV0dXJuIHRydWUgaWYgdGhlIG1hcCBibG9jayBpcyBub3QgMCwgaWUuIGlmIHRoZXJlIGlzIGEgYmxvY2tpbmcgd2FsbC5cbiAgICAgICAgaWYgKHRoaXMubGV2ZWwubWFwW2l5XVtpeF0gIT0gMClcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAoc3ByaXRlTWFwW2l5XVtpeF0gJiYgc3ByaXRlTWFwW2l5XVtpeF0uYmxvY2spXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjaGVja0NvbGxpc2lvbihmcm9tWCwgZnJvbVksIHRvWCwgdG9ZLCByYWRpdXMpIHtcbiAgICAgICAgdmFyIHBvcyA9IHtcbiAgICAgICAgICAgIHg6IGZyb21YLFxuICAgICAgICAgICAgeTogZnJvbVksXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0b1kgPCAwIHx8IHRvWSA+PSB0aGlzLm1hcEhlaWdodCB8fCB0b1ggPCAwIHx8IHRvWCA+PSB0aGlzLm1hcFdpZHRoKVxuICAgICAgICAgICAgcmV0dXJuIHBvcztcbiAgICAgICAgdmFyIGJsb2NrWCA9IE1hdGguZmxvb3IodG9YKTtcbiAgICAgICAgdmFyIGJsb2NrWSA9IE1hdGguZmxvb3IodG9ZKTtcbiAgICAgICAgaWYgKHRoaXMuaXNCbG9ja2luZyhibG9ja1gsIGJsb2NrWSkpIHtcbiAgICAgICAgICAgIHJldHVybiBwb3M7XG4gICAgICAgIH1cbiAgICAgICAgcG9zLnggPSB0b1g7XG4gICAgICAgIHBvcy55ID0gdG9ZO1xuICAgICAgICB2YXIgYmxvY2tUb3AgPSB0aGlzLmlzQmxvY2tpbmcoYmxvY2tYLCBibG9ja1kgLSAxKTtcbiAgICAgICAgdmFyIGJsb2NrQm90dG9tID0gdGhpcy5pc0Jsb2NraW5nKGJsb2NrWCwgYmxvY2tZICsgMSk7XG4gICAgICAgIHZhciBibG9ja0xlZnQgPSB0aGlzLmlzQmxvY2tpbmcoYmxvY2tYIC0gMSwgYmxvY2tZKTtcbiAgICAgICAgdmFyIGJsb2NrUmlnaHQgPSB0aGlzLmlzQmxvY2tpbmcoYmxvY2tYICsgMSwgYmxvY2tZKTtcbiAgICAgICAgaWYgKGJsb2NrVG9wICYmIHRvWSAtIGJsb2NrWSA8IHJhZGl1cykge1xuICAgICAgICAgICAgdG9ZID0gcG9zLnkgPSBibG9ja1kgKyByYWRpdXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJsb2NrQm90dG9tICYmIGJsb2NrWSArIDEgLSB0b1kgPCByYWRpdXMpIHtcbiAgICAgICAgICAgIHRvWSA9IHBvcy55ID0gYmxvY2tZICsgMSAtIHJhZGl1cztcbiAgICAgICAgfVxuICAgICAgICBpZiAoYmxvY2tMZWZ0ICYmIHRvWCAtIGJsb2NrWCA8IHJhZGl1cykge1xuICAgICAgICAgICAgdG9YID0gcG9zLnggPSBibG9ja1ggKyByYWRpdXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJsb2NrUmlnaHQgJiYgYmxvY2tYICsgMSAtIHRvWCA8IHJhZGl1cykge1xuICAgICAgICAgICAgdG9YID0gcG9zLnggPSBibG9ja1ggKyAxIC0gcmFkaXVzO1xuICAgICAgICB9XG4gICAgICAgIC8vIGlzIHRpbGUgdG8gdGhlIHRvcC1sZWZ0IGEgd2FsbFxuICAgICAgICBpZiAodGhpcy5pc0Jsb2NraW5nKGJsb2NrWCAtIDEsIGJsb2NrWSAtIDEpICYmICEoYmxvY2tUb3AgJiYgYmxvY2tMZWZ0KSkge1xuICAgICAgICAgICAgdmFyIGR4ID0gdG9YIC0gYmxvY2tYO1xuICAgICAgICAgICAgdmFyIGR5ID0gdG9ZIC0gYmxvY2tZO1xuICAgICAgICAgICAgaWYgKGR4ICogZHggKyBkeSAqIGR5IDwgcmFkaXVzICogcmFkaXVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGR4ICogZHggPiBkeSAqIGR5KVxuICAgICAgICAgICAgICAgICAgICB0b1ggPSBwb3MueCA9IGJsb2NrWCArIHJhZGl1cztcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHRvWSA9IHBvcy55ID0gYmxvY2tZICsgcmFkaXVzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGlzIHRpbGUgdG8gdGhlIHRvcC1yaWdodCBhIHdhbGxcbiAgICAgICAgaWYgKHRoaXMuaXNCbG9ja2luZyhibG9ja1ggKyAxLCBibG9ja1kgLSAxKSAmJiAhKGJsb2NrVG9wICYmIGJsb2NrUmlnaHQpKSB7XG4gICAgICAgICAgICB2YXIgZHggPSB0b1ggLSAoYmxvY2tYICsgMSk7XG4gICAgICAgICAgICB2YXIgZHkgPSB0b1kgLSBibG9ja1k7XG4gICAgICAgICAgICBpZiAoZHggKiBkeCArIGR5ICogZHkgPCByYWRpdXMgKiByYWRpdXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZHggKiBkeCA+IGR5ICogZHkpXG4gICAgICAgICAgICAgICAgICAgIHRvWCA9IHBvcy54ID0gYmxvY2tYICsgMSAtIHJhZGl1cztcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHRvWSA9IHBvcy55ID0gYmxvY2tZICsgcmFkaXVzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGlzIHRpbGUgdG8gdGhlIGJvdHRvbS1sZWZ0IGEgd2FsbFxuICAgICAgICBpZiAodGhpcy5pc0Jsb2NraW5nKGJsb2NrWCAtIDEsIGJsb2NrWSArIDEpICYmXG4gICAgICAgICAgICAhKGJsb2NrQm90dG9tICYmIGJsb2NrQm90dG9tKSkge1xuICAgICAgICAgICAgdmFyIGR4ID0gdG9YIC0gYmxvY2tYO1xuICAgICAgICAgICAgdmFyIGR5ID0gdG9ZIC0gKGJsb2NrWSArIDEpO1xuICAgICAgICAgICAgaWYgKGR4ICogZHggKyBkeSAqIGR5IDwgcmFkaXVzICogcmFkaXVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGR4ICogZHggPiBkeSAqIGR5KVxuICAgICAgICAgICAgICAgICAgICB0b1ggPSBwb3MueCA9IGJsb2NrWCArIHJhZGl1cztcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHRvWSA9IHBvcy55ID0gYmxvY2tZICsgMSAtIHJhZGl1cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBpcyB0aWxlIHRvIHRoZSBib3R0b20tcmlnaHQgYSB3YWxsXG4gICAgICAgIGlmICh0aGlzLmlzQmxvY2tpbmcoYmxvY2tYICsgMSwgYmxvY2tZICsgMSkgJiZcbiAgICAgICAgICAgICEoYmxvY2tCb3R0b20gJiYgYmxvY2tSaWdodCkpIHtcbiAgICAgICAgICAgIHZhciBkeCA9IHRvWCAtIChibG9ja1ggKyAxKTtcbiAgICAgICAgICAgIHZhciBkeSA9IHRvWSAtIChibG9ja1kgKyAxKTtcbiAgICAgICAgICAgIGlmIChkeCAqIGR4ICsgZHkgKiBkeSA8IHJhZGl1cyAqIHJhZGl1cykge1xuICAgICAgICAgICAgICAgIGlmIChkeCAqIGR4ID4gZHkgKiBkeSlcbiAgICAgICAgICAgICAgICAgICAgdG9YID0gcG9zLnggPSBibG9ja1ggKyAxIC0gcmFkaXVzO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgdG9ZID0gcG9zLnkgPSBibG9ja1kgKyAxIC0gcmFkaXVzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwb3M7XG4gICAgfVxuICAgIGNhc3RSYXlzKCkge1xuICAgICAgICBsZXQgc3RyaXBJZHggPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVJheXM7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgcmF5U2NyZWVuUG9zID0gKC1udW1SYXlzIC8gMiArIGkpICogc3RyaXBXaWR0aDtcbiAgICAgICAgICAgIGNvbnN0IHJheVZpZXdEaXN0ID0gTWF0aC5zcXJ0KHJheVNjcmVlblBvcyAqIHJheVNjcmVlblBvcyArIHZpZXdEaXN0ICogdmlld0Rpc3QpO1xuICAgICAgICAgICAgY29uc3QgcmF5QW5nbGUgPSBNYXRoLmFzaW4ocmF5U2NyZWVuUG9zIC8gcmF5Vmlld0Rpc3QpO1xuICAgICAgICAgICAgdGhpcy5jYXN0U2luZ2xlUmF5KHRoaXMucGxheWVyLnJvdGF0aW9uICsgcmF5QW5nbGUsIHN0cmlwSWR4KyspO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhc3RTaW5nbGVSYXkocmF5QW5nbGUsIHN0cmlwSWR4KSB7XG4gICAgICAgIC8vIGh0dHBzOi8vZGV2Lm9wZXJhLmNvbS9hcnRpY2xlcy8zZC1nYW1lcy13aXRoLWNhbnZhcy1hbmQtcmF5Y2FzdGluZy1wYXJ0LTIvXG4gICAgICAgIC8vIGZpcnN0IG1ha2Ugc3VyZSB0aGUgYW5nbGUgaXMgYmV0d2VlbiAwIGFuZCAzNjAgZGVncmVlc1xuICAgICAgICByYXlBbmdsZSAlPSB0d29QSTtcbiAgICAgICAgaWYgKHJheUFuZ2xlIDwgMCkge1xuICAgICAgICAgICAgcmF5QW5nbGUgKz0gdHdvUEk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbW92aW5nIHJpZ2h0L2xlZnQ/IHVwL2Rvd24/IERldGVybWluZWQgYnkgd2hpY2ggcXVhZHJhbnQgdGhlIGFuZ2xlIGlzIGluLlxuICAgICAgICB2YXIgcmlnaHQgPSByYXlBbmdsZSA+IHR3b1BJICogMC43NSB8fCByYXlBbmdsZSA8IHR3b1BJICogMC4yNTtcbiAgICAgICAgdmFyIHVwID0gcmF5QW5nbGUgPCAwIHx8IHJheUFuZ2xlID4gTWF0aC5QSTtcbiAgICAgICAgdmFyIHdhbGxUeXBlID0gMDtcbiAgICAgICAgLy8gb25seSBkbyB0aGVzZSBvbmNlXG4gICAgICAgIHZhciBhbmdsZVNpbiA9IE1hdGguc2luKHJheUFuZ2xlKTtcbiAgICAgICAgdmFyIGFuZ2xlQ29zID0gTWF0aC5jb3MocmF5QW5nbGUpO1xuICAgICAgICB2YXIgZGlzdCA9IDA7IC8vIHRoZSBkaXN0YW5jZSB0byB0aGUgYmxvY2sgd2UgaGl0XG4gICAgICAgIHZhciB4SGl0ID0gMDsgLy8gdGhlIHggYW5kIHkgY29vcmQgb2Ygd2hlcmUgdGhlIHJheSBoaXQgdGhlIGJsb2NrXG4gICAgICAgIHZhciB5SGl0ID0gMDtcbiAgICAgICAgbGV0IHhXYWxsSGl0ID0gMDtcbiAgICAgICAgbGV0IHlXYWxsSGl0ID0gMDtcbiAgICAgICAgdmFyIHRleHR1cmVYID0gMDsgLy8gdGhlIHgtY29vcmQgb24gdGhlIHRleHR1cmUgb2YgdGhlIGJsb2NrLCBpZS4gd2hhdCBwYXJ0IG9mIHRoZSB0ZXh0dXJlIGFyZSB3ZSBnb2luZyB0byByZW5kZXJcbiAgICAgICAgdmFyIHdhbGxYOyAvLyB0aGUgKHgseSkgbWFwIGNvb3JkcyBvZiB0aGUgYmxvY2tcbiAgICAgICAgdmFyIHdhbGxZO1xuICAgICAgICBsZXQgd2FsbElzU2hhZGVkID0gZmFsc2U7XG4gICAgICAgIHZhciB3YWxsSXNIb3Jpem9udGFsID0gZmFsc2U7XG4gICAgICAgIC8vIGZpcnN0IGNoZWNrIGFnYWluc3QgdGhlIHZlcnRpY2FsIG1hcC93YWxsIGxpbmVzXG4gICAgICAgIC8vIHdlIGRvIHRoaXMgYnkgbW92aW5nIHRvIHRoZSByaWdodCBvciBsZWZ0IGVkZ2Ugb2YgdGhlIGJsb2NrIHdlJ3JlIHN0YW5kaW5nIGluXG4gICAgICAgIC8vIGFuZCB0aGVuIG1vdmluZyBpbiAxIG1hcCB1bml0IHN0ZXBzIGhvcml6b250YWxseS4gVGhlIGFtb3VudCB3ZSBoYXZlIHRvIG1vdmUgdmVydGljYWxseVxuICAgICAgICAvLyBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBzbG9wZSBvZiB0aGUgcmF5LCB3aGljaCBpcyBzaW1wbHkgZGVmaW5lZCBhcyBzaW4oYW5nbGUpIC8gY29zKGFuZ2xlKS5cbiAgICAgICAgdmFyIHNsb3BlID0gYW5nbGVTaW4gLyBhbmdsZUNvczsgLy8gdGhlIHNsb3BlIG9mIHRoZSBzdHJhaWdodCBsaW5lIG1hZGUgYnkgdGhlIHJheVxuICAgICAgICB2YXIgZFhWZXIgPSByaWdodCA/IDEgOiAtMTsgLy8gd2UgbW92ZSBlaXRoZXIgMSBtYXAgdW5pdCB0byB0aGUgbGVmdCBvciByaWdodFxuICAgICAgICB2YXIgZFlWZXIgPSBkWFZlciAqIHNsb3BlOyAvLyBob3cgbXVjaCB0byBtb3ZlIHVwIG9yIGRvd25cbiAgICAgICAgdmFyIHggPSByaWdodFxuICAgICAgICAgICAgPyBNYXRoLmNlaWwodGhpcy5wbGF5ZXIucG9zLngpXG4gICAgICAgICAgICA6IE1hdGguZmxvb3IodGhpcy5wbGF5ZXIucG9zLngpOyAvLyBzdGFydGluZyBob3Jpem9udGFsIHBvc2l0aW9uLCBhdCBvbmUgb2YgdGhlIGVkZ2VzIG9mIHRoZSBjdXJyZW50IG1hcCBibG9ja1xuICAgICAgICB2YXIgeSA9IHRoaXMucGxheWVyLnBvcy55ICsgKHggLSB0aGlzLnBsYXllci5wb3MueCkgKiBzbG9wZTsgLy8gc3RhcnRpbmcgdmVydGljYWwgcG9zaXRpb24uIFdlIGFkZCB0aGUgc21hbGwgaG9yaXpvbnRhbCBzdGVwIHdlIGp1c3QgbWFkZSwgbXVsdGlwbGllZCBieSB0aGUgc2xvcGUuXG4gICAgICAgIHdoaWxlICh4ID49IDAgJiYgeCA8IHRoaXMubWFwV2lkdGggJiYgeSA+PSAwICYmIHkgPCB0aGlzLm1hcEhlaWdodCkge1xuICAgICAgICAgICAgdmFyIHdhbGxYID0geCArIChyaWdodCA/IDAgOiAtMSk7XG4gICAgICAgICAgICB2YXIgd2FsbFkgPSB5ID4+IDA7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChzcHJpdGVNYXBbd2FsbFldW3dhbGxYXSAmJiAhc3ByaXRlTWFwW3dhbGxZXVt3YWxsWF0udmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBzcHJpdGVNYXBbd2FsbFldW3dhbGxYXS52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZVNwcml0ZXMucHVzaChzcHJpdGVNYXBbd2FsbFldW3dhbGxYXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfVxuICAgICAgICAgICAgLy8gaXMgdGhpcyBwb2ludCBpbnNpZGUgYSB3YWxsIGJsb2NrP1xuICAgICAgICAgICAgaWYgKHRoaXMubGV2ZWwubWFwW3dhbGxZXVt3YWxsWF0gPiAwKSB7XG4gICAgICAgICAgICAgICAgbGV0IGRpc3RYID0geCAtIHRoaXMucGxheWVyLnBvcy54O1xuICAgICAgICAgICAgICAgIGxldCBkaXN0WSA9IHkgLSB0aGlzLnBsYXllci5wb3MueTtcbiAgICAgICAgICAgICAgICBkaXN0ID0gZGlzdFggKiBkaXN0WCArIGRpc3RZICogZGlzdFk7IC8vIHRoZSBkaXN0YW5jZSBmcm9tIHRoZSBwbGF5ZXIgdG8gdGhpcyBwb2ludCwgc3F1YXJlZC5cbiAgICAgICAgICAgICAgICB3YWxsVHlwZSA9IHRoaXMubGV2ZWwubWFwW3dhbGxZXVt3YWxsWF07IC8vIHdlJ2xsIHJlbWVtYmVyIHRoZSB0eXBlIG9mIHdhbGwgd2UgaGl0IGZvciBsYXRlclxuICAgICAgICAgICAgICAgIHRleHR1cmVYID0geSAlIDE7IC8vIHdoZXJlIGV4YWN0bHkgYXJlIHdlIG9uIHRoZSB3YWxsPyB0ZXh0dXJlWCBpcyB0aGUgeCBjb29yZGluYXRlIG9uIHRoZSB0ZXh0dXJlIHRoYXQgd2UnbGwgdXNlIGxhdGVyIHdoZW4gdGV4dHVyaW5nIHRoZSB3YWxsLlxuICAgICAgICAgICAgICAgIGlmICghcmlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZVggPSAxIC0gdGV4dHVyZVg7XG4gICAgICAgICAgICAgICAgfSAvLyBpZiB3ZSdyZSBsb29raW5nIHRvIHRoZSBsZWZ0IHNpZGUgb2YgdGhlIG1hcCwgdGhlIHRleHR1cmUgc2hvdWxkIGJlIHJldmVyc2VkXG4gICAgICAgICAgICAgICAgeEhpdCA9IHg7IC8vIHNhdmUgdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBoaXQuIFdlIG9ubHkgcmVhbGx5IHVzZSB0aGVzZSB0byBkcmF3IHRoZSByYXlzIG9uIG1pbmltYXAuXG4gICAgICAgICAgICAgICAgeUhpdCA9IHk7XG4gICAgICAgICAgICAgICAgeFdhbGxIaXQgPSB3YWxsWDtcbiAgICAgICAgICAgICAgICB5V2FsbEhpdCA9IHdhbGxZO1xuICAgICAgICAgICAgICAgIHdhbGxJc0hvcml6b250YWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeCArPSBkWFZlcjtcbiAgICAgICAgICAgIHkgKz0gZFlWZXI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbm93IGNoZWNrIGFnYWluc3QgaG9yaXpvbnRhbCBsaW5lcy4gSXQncyBiYXNpY2FsbHkgdGhlIHNhbWUsIGp1c3QgXCJ0dXJuZWQgYXJvdW5kXCIuXG4gICAgICAgIC8vIHRoZSBvbmx5IGRpZmZlcmVuY2UgaGVyZSBpcyB0aGF0IG9uY2Ugd2UgaGl0IGEgbWFwIGJsb2NrLFxuICAgICAgICAvLyB3ZSBjaGVjayBpZiB0aGVyZSB3ZSBhbHNvIGZvdW5kIG9uZSBpbiB0aGUgZWFybGllciwgdmVydGljYWwgcnVuLiBXZSdsbCBrbm93IHRoYXQgaWYgZGlzdCAhPSAwLlxuICAgICAgICAvLyBJZiBzbywgd2Ugb25seSByZWdpc3RlciB0aGlzIGhpdCBpZiB0aGlzIGRpc3RhbmNlIGlzIHNtYWxsZXIuXG4gICAgICAgIHZhciBzbG9wZSA9IGFuZ2xlQ29zIC8gYW5nbGVTaW47XG4gICAgICAgIHZhciBkWUhvciA9IHVwID8gLTEgOiAxO1xuICAgICAgICB2YXIgZFhIb3IgPSBkWUhvciAqIHNsb3BlO1xuICAgICAgICB2YXIgeSA9IHVwID8gTWF0aC5mbG9vcih0aGlzLnBsYXllci5wb3MueSkgOiBNYXRoLmNlaWwodGhpcy5wbGF5ZXIucG9zLnkpO1xuICAgICAgICB2YXIgeCA9IHRoaXMucGxheWVyLnBvcy54ICsgKHkgLSB0aGlzLnBsYXllci5wb3MueSkgKiBzbG9wZTtcbiAgICAgICAgd2hpbGUgKHggPj0gMCAmJiB4IDwgdGhpcy5tYXBXaWR0aCAmJiB5ID49IDAgJiYgeSA8IHRoaXMubWFwSGVpZ2h0KSB7XG4gICAgICAgICAgICB2YXIgd2FsbFkgPSBNYXRoLmZsb29yKHkgKyAodXAgPyAtMSA6IDApKTtcbiAgICAgICAgICAgIHZhciB3YWxsWCA9IHggPj4gMDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHNwcml0ZU1hcFt3YWxsWV1bd2FsbFhdICYmICFzcHJpdGVNYXBbd2FsbFldW3dhbGxYXS52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwcml0ZU1hcFt3YWxsWV1bd2FsbFhdLnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlU3ByaXRlcy5wdXNoKHNwcml0ZU1hcFt3YWxsWV1bd2FsbFhdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkgeyB9XG4gICAgICAgICAgICBpZiAodGhpcy5sZXZlbC5tYXBbd2FsbFldW3dhbGxYXSA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgZGlzdFggPSB4IC0gdGhpcy5wbGF5ZXIucG9zLng7XG4gICAgICAgICAgICAgICAgdmFyIGRpc3RZID0geSAtIHRoaXMucGxheWVyLnBvcy55O1xuICAgICAgICAgICAgICAgIHZhciBibG9ja0Rpc3QgPSBkaXN0WCAqIGRpc3RYICsgZGlzdFkgKiBkaXN0WTtcbiAgICAgICAgICAgICAgICBpZiAoIWRpc3QgfHwgYmxvY2tEaXN0IDwgZGlzdCkge1xuICAgICAgICAgICAgICAgICAgICBkaXN0ID0gYmxvY2tEaXN0O1xuICAgICAgICAgICAgICAgICAgICB4SGl0ID0geDtcbiAgICAgICAgICAgICAgICAgICAgeUhpdCA9IHk7XG4gICAgICAgICAgICAgICAgICAgIHlXYWxsSGl0ID0gd2FsbFk7XG4gICAgICAgICAgICAgICAgICAgIHhXYWxsSGl0ID0gd2FsbFg7XG4gICAgICAgICAgICAgICAgICAgIHdhbGxUeXBlID0gdGhpcy5sZXZlbC5tYXBbd2FsbFldW3dhbGxYXTtcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZVggPSB4ICUgMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlWCA9IDEgLSB0ZXh0dXJlWDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHggKz0gZFhIb3I7XG4gICAgICAgICAgICB5ICs9IGRZSG9yO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkaXN0KSB7XG4gICAgICAgICAgICB2YXIgc3RyaXAgPSB0aGlzLnJlbmRlcmVyLnNjcmVlblN0cmlwc1tzdHJpcElkeF07XG4gICAgICAgICAgICBkaXN0ID0gTWF0aC5zcXJ0KGRpc3QpO1xuICAgICAgICAgICAgLy8gdXNlIHBlcnBlbmRpY3VsYXIgZGlzdGFuY2UgdG8gYWRqdXN0IGZvciBmaXNoIGV5ZVxuICAgICAgICAgICAgLy8gZGlzdG9ydGVkX2Rpc3QgPSBjb3JyZWN0X2Rpc3QgLyBjb3MocmVsYXRpdmVfYW5nbGVfb2ZfcmF5KVxuICAgICAgICAgICAgZGlzdCA9IGRpc3QgKiBNYXRoLmNvcyh0aGlzLnBsYXllci5yb3RhdGlvbiAtIHJheUFuZ2xlKTtcbiAgICAgICAgICAgIC8vIG5vdyBjYWxjIHRoZSBwb3NpdGlvbiwgaGVpZ2h0IGFuZCB3aWR0aCBvZiB0aGUgd2FsbCBzdHJpcFxuICAgICAgICAgICAgLy8gXCJyZWFsXCIgd2FsbCBoZWlnaHQgaW4gdGhlIGdhbWUgd29ybGQgaXMgMSB1bml0LCB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgcGxheWVyIHRvIHRoZSBzY3JlZW4gaXMgdmlld0Rpc3QsXG4gICAgICAgICAgICAvLyB0aHVzIHRoZSBoZWlnaHQgb24gdGhlIHNjcmVlbiBpcyBlcXVhbCB0byB3YWxsX2hlaWdodF9yZWFsICogdmlld0Rpc3QgLyBkaXN0XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IE1hdGgucm91bmQodmlld0Rpc3QgLyBkaXN0KTtcbiAgICAgICAgICAgIC8vIHdpZHRoIGlzIHRoZSBzYW1lLCBidXQgd2UgaGF2ZSB0byBzdHJldGNoIHRoZSB0ZXh0dXJlIHRvIGEgZmFjdG9yIG9mIHN0cmlwV2lkdGggdG8gbWFrZSBpdCBmaWxsIHRoZSBzdHJpcCBjb3JyZWN0bHlcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IGhlaWdodCAqIHN0cmlwV2lkdGg7XG4gICAgICAgICAgICAvLyB0b3AgcGxhY2VtZW50IGlzIGVhc3kgc2luY2UgZXZlcnl0aGluZyBpcyBjZW50ZXJlZCBvbiB0aGUgeC1heGlzLCBzbyB3ZSBzaW1wbHkgbW92ZVxuICAgICAgICAgICAgLy8gaXQgaGFsZiB3YXkgZG93biB0aGUgc2NyZWVuIGFuZCB0aGVuIGhhbGYgdGhlIHdhbGwgaGVpZ2h0IGJhY2sgdXAuXG4gICAgICAgICAgICB2YXIgdG9wID0gTWF0aC5yb3VuZCgoc2NyZWVuSGVpZ2h0IC0gaGVpZ2h0KSAvIDIpO1xuICAgICAgICAgICAgLy9AdHMtaWdub3JlXG4gICAgICAgICAgICBsZXQgc3R5bGVIZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICBzdHJpcC5zdHlsZS5oZWlnaHQgPSBzdHlsZUhlaWdodCArIFwicHhcIjtcbiAgICAgICAgICAgIHN0cmlwLnN0eWxlLnRvcCA9IHRvcCArIFwicHhcIjtcbiAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICAgICAgc3RyaXAuaW1nLnN0eWxlLmhlaWdodCA9IE1hdGguZmxvb3IoaGVpZ2h0ICogbnVtVGV4dHVyZXMgLyAyKSArIFwicHhcIjtcbiAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICAgICAgc3RyaXAuaW1nLnN0eWxlLndpZHRoID0gTWF0aC5mbG9vcih3aWR0aCAqIG51bVRleHR1cmVzIC8gMikgKyBcInB4XCI7XG4gICAgICAgICAgICAvL0B0cy1pZ25vcmVcbiAgICAgICAgICAgIHN0cmlwLmltZy5zdHlsZS50b3AgPSAtTWF0aC5mbG9vcihoZWlnaHQgKiAod2FsbFR5cGUgLSAxKSkgKyBcInB4XCI7XG4gICAgICAgICAgICB2YXIgdGV4WCA9IE1hdGgucm91bmQodGV4dHVyZVggKiB3aWR0aCk7XG4gICAgICAgICAgICBpZiAodGV4WCA+IHdpZHRoIC0gc3RyaXBXaWR0aClcbiAgICAgICAgICAgICAgICB0ZXhYID0gd2lkdGggLSBzdHJpcFdpZHRoO1xuICAgICAgICAgICAgLy9AdHMtaWdub3JlXG4gICAgICAgICAgICBzdHJpcC5pbWcuc3R5bGUubGVmdCA9IC10ZXhYICsgXCJweFwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldHVwKGFzc2V0cykge1xuICAgICAgICB0aGlzLm1hcFdpZHRoID0gdGhpcy5sZXZlbC5tYXBbMF0ubGVuZ3RoO1xuICAgICAgICB0aGlzLm1hcEhlaWdodCA9IHRoaXMubGV2ZWwubWFwLmxlbmd0aDtcbiAgICAgICAgdGhpcy5pbml0U3ByaXRlcygpO1xuICAgICAgICBjb25zb2xlLmxvZyhhc3NldHMpO1xuICAgICAgICB0aGlzLmRyYXdNaW5pTWFwKCk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuaW1hZ2VSZW5kZXJpbmcgPSBcInBpeGVsYXRlZFwiO1xuICAgICAgICB0aGlzLmxvb3AoMCk7XG4gICAgfVxuICAgIG1vdmVQbGF5ZXIoZW50aXR5LCBkdCkge1xuICAgICAgICBjb25zdCBtb3ZlU3RlcCA9IGVudGl0eS5tb3ZlU3BlZWQgKiBlbnRpdHkuc3BlZWQ7XG4gICAgICAgIC8vIHBsYXllciBtdXN0IHJvdGF0ZSBhbmQgbW92ZSBvbiBlYWNoIHNpZGVcbiAgICAgICAgbGV0IG5ld1ggPSBlbnRpdHkucG9zLnggKyBNYXRoLmNvcyhlbnRpdHkucm90YXRpb24pICogbW92ZVN0ZXAgKiAtZHQ7XG4gICAgICAgIGxldCBuZXdZID0gZW50aXR5LnBvcy55ICsgTWF0aC5zaW4oZW50aXR5LnJvdGF0aW9uKSAqIG1vdmVTdGVwICogLWR0O1xuICAgICAgICBpZiAoZW50aXR5LmRpcmVjdGlvbi54ICE9PSAwKSB7XG4gICAgICAgICAgICBuZXdYID0gZW50aXR5LnBvcy54ICsgTWF0aC5jb3MoZW50aXR5LnJvdGF0aW9uICsgTWF0aC5QSSAvIDIpICogbW92ZVN0ZXAgKiAtZHQ7XG4gICAgICAgICAgICBuZXdZID0gZW50aXR5LnBvcy55ICsgTWF0aC5zaW4oZW50aXR5LnJvdGF0aW9uICsgTWF0aC5QSSAvIDIpICogbW92ZVN0ZXAgKiAtZHQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcG9zID0gdGhpcy5jaGVja0NvbGxpc2lvbihlbnRpdHkucG9zLngsIGVudGl0eS5wb3MueSwgbmV3WCwgbmV3WSwgMC4zNSk7XG4gICAgICAgIGVudGl0eS5wb3MueCA9IHBvcy54O1xuICAgICAgICBlbnRpdHkucG9zLnkgPSBwb3MueTtcbiAgICAgICAgaWYgKGVudGl0eS5yb3RhdGlvbiA8IDApXG4gICAgICAgICAgICBlbnRpdHkucm90YXRpb24gKz0gTWF0aC5QSSAqIDI7XG4gICAgICAgIGlmIChlbnRpdHkucm90YXRpb24gPj0gTWF0aC5QSSAqIDIpIHtcbiAgICAgICAgICAgIGVudGl0eS5yb3RhdGlvbiAtPSBNYXRoLlBJICogMjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLmRheVRpbWUgPCAxMikge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5za3lib3guc3R5bGUuYmFja2dyb3VuZENvbG9yID0gYHJnYmEoJHs5OSAvICgxMiAvIHRoaXMuZGF5VGltZSl9LCBcbiAgICAkezE1NSAvICgxMiAvIHRoaXMuZGF5VGltZSl9LFxuICAgICR7MjU1IC8gKDEyIC8gdGhpcy5kYXlUaW1lKX1cbiAgICAsIDEpYDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2t5Ym94LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGByZ2JhKCR7OTkgLyAoMTIgLyAoMjQgLSB0aGlzLmRheVRpbWUpKX0sIFxuICAgICAgJHsxNTUgLyAoMTIgLyAoMjQgLSB0aGlzLmRheVRpbWUpKX0sXG4gICAgICAkezI1NSAvICgxMiAvICgyNCAtIHRoaXMuZGF5VGltZSkpfVxuICAgICAgLCAxKWA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIHRoaXMuY29udHJvbGxlci51cGRhdGUoZHQpO1xuICAgICAgICB0aGlzLm1vdmVQbGF5ZXIodGhpcy5wbGF5ZXIsIGR0KTtcbiAgICAgICAgdGhpcy51cGRhdGVNaW5pTWFwKCk7XG4gICAgICAgIHRoaXMuY2FzdFJheXMoKTtcbiAgICAgICAgdGlja0NvdW50ICs9IC1kdDtcbiAgICAgICAgaWYgKHRpY2tDb3VudCA+IDEwMCkge1xuICAgICAgICAgICAgdGhpcy5kYXlUaW1lICs9IDAuMDE7XG4gICAgICAgICAgICBpZiAodGhpcy5kYXlUaW1lID4gMjMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRheVRpbWUgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGlja0NvdW50ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBkZWJ1Z1NjcmVlbi5pbm5lclRleHQgPSBgXG4gICAgICBQTEFZRVIgWDogJHt0aGlzLnBsYXllci5wb3MueH1cbiAgICAgIFBMQVlFUiBZOiAke3RoaXMucGxheWVyLnBvcy55fVxuICAgICAgUExBWUVSIEFOR0xFOiAke3RoaXMucGxheWVyLnJvdGF0aW9ufVxuICAgICAgRFQ6ICR7ZHR9XG4gICAgYDtcbiAgICB9XG4gICAgbG9vcCh0cykge1xuICAgICAgICBjb25zdCBkdCA9IGxhc3RUaW1lIC0gdHM7XG4gICAgICAgIGxhc3RUaW1lID0gdHM7XG4gICAgICAgIHRoaXMudXBkYXRlKGR0KTtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMubG9vcC5iaW5kKHRoaXMpKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgR2FtZSBmcm9tIFwiLi9nYW1lXCI7XG5jb25zdCBnYW1lID0gbmV3IEdhbWUoKTtcbi8vQHRzLWlnbm9yZVxud2luZG93LmdhbWUgPSBnYW1lO1xuIl0sIm5hbWVzIjpbImFsZWEiLCJ4b3IxMjgiLCJ4b3J3b3ciLCJ4b3JzaGlmdDciLCJ4b3I0MDk2IiwidHljaGVpIiwic3IiLCJtb2R1bGUiLCJleHBvcnRzIiwiZ2xvYmFsIiwiZGVmaW5lIiwiQWxlYSIsInNlZWQiLCJtZSIsInRoaXMiLCJtYXNoIiwibiIsImRhdGEiLCJTdHJpbmciLCJpIiwibGVuZ3RoIiwiaCIsImNoYXJDb2RlQXQiLCJNYXNoIiwibmV4dCIsInQiLCJzMCIsImMiLCJzMSIsInMyIiwiY29weSIsImYiLCJpbXBsIiwib3B0cyIsInhnIiwic3RhdGUiLCJwcm5nIiwiaW50MzIiLCJkb3VibGUiLCJxdWljayIsIlhvckdlbiIsInN0cnNlZWQiLCJiIiwiZCIsImEiLCJNYXRoIiwiZmxvb3IiLCJrIiwicmVzdWx0IiwieCIsInkiLCJ6IiwidyIsInYiLCJYIiwiaiIsImxpbWl0IiwibWF4IiwiaW5pdCIsInNsaWNlIiwiRGF0ZSIsInB1c2giLCJwb29sIiwibWF0aCIsIm5vZGVjcnlwdG8iLCJ3aWR0aCIsImNodW5rcyIsInJuZ25hbWUiLCJzdGFydGRlbm9tIiwicG93Iiwic2lnbmlmaWNhbmNlIiwib3ZlcmZsb3ciLCJtYXNrIiwic2VlZHJhbmRvbSIsIm9wdGlvbnMiLCJjYWxsYmFjayIsImtleSIsInNob3J0c2VlZCIsIm1peGtleSIsImZsYXR0ZW4iLCJlbnRyb3B5IiwidG9zdHJpbmciLCJvdXQiLCJyYW5kb21CeXRlcyIsIlVpbnQ4QXJyYXkiLCJjcnlwdG8iLCJtc0NyeXB0byIsImdldFJhbmRvbVZhbHVlcyIsImUiLCJicm93c2VyIiwibmF2aWdhdG9yIiwicGx1Z2lucyIsInNjcmVlbiIsImF1dG9zZWVkIiwiYXJjNCIsIkFSQzQiLCJnIiwiUyIsInBhc3MiLCJpc19tYXRoX2NhbGwiLCJrZXlsZW4iLCJzIiwiY291bnQiLCJyIiwib2JqIiwiZGVwdGgiLCJwcm9wIiwidHlwIiwic21lYXIiLCJzdHJpbmdzZWVkIiwiZnJvbUNoYXJDb2RlIiwiYXBwbHkiLCJyYW5kb20iLCJleCIsInNlbGYiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJpZCIsImxvYWRlZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjYWxsIiwiYW1kRCIsIkVycm9yIiwiYW1kTyIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkZWZpbml0aW9uIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5Iiwibm1kIiwicGF0aHMiLCJjaGlsZHJlbiIsIm1hcCIsImhlaWdodCIsIndpbmRvdyIsIlVpbnQzMkFycmF5IiwidG9TdHJpbmciLCJyb29tcyIsImxpbmVzIiwicGFydGl0aW9uIiwicm9vbSIsImxlZnRSb29tIiwicmlnaHRSb29tIiwibGluZSIsImlzVmVydGljYWwiLCJzcGxpdFBvaW50Iiwic3RhcnQiLCJlbmQiLCJwYXJ0aXRpb25Sb29tIiwiQXJyYXkiLCJmaWxsIiwiZm9yRWFjaCIsImN4IiwiY3kiLCJnZW5lcmF0ZU1hcCIsImNvbnNvbGUiLCJsb2ciLCJuYW1lIiwiUGVyc29uIiwiY29uc3RydWN0b3IiLCJwb3MiLCJzcGVlZCIsIm1vdmVTcGVlZCIsInJvdGF0aW9uIiwiZGlyZWN0aW9uIiwicm90YXRpb25TcGVlZCIsIlBsYXllciIsInN1cGVyIiwiaXNTdHJhZmluZyIsIlBJIiwiSFVEIiwiX2NhbnZhcyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInN0eWxlIiwicG9zaXRpb24iLCJ0b3AiLCJsZWZ0IiwiX2N0eCIsImdldENvbnRleHQiLCJyZW5kZXJDcm9zc2hhaXIiLCJjYW52YXMiLCJjdHgiLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJsaW5lVG8iLCJzdHJva2VTdHlsZSIsInN0cm9rZSIsIlJlbmRlcmVyIiwic3RyaXBXaWR0aCIsInNjcmVlblN0cmlwcyIsInNreWJveCIsImJvZHkiLCJwcmVwZW5kIiwib25SZXNpemUiLCJhc3BlY3RSYXRpbyIsIm5ld1dpZHRoIiwiaW5uZXJXaWR0aCIsIm5ld0hlaWdodCIsImN1cnNvciIsImh1ZCIsImxldmVsIiwiaGFuZCIsImFwcGVuZENoaWxkIiwic3RyaXAiLCJiYWNrZ3JvdW5kQ29sb3IiLCJpbWciLCJJbWFnZSIsInNyYyIsImRyYXdSYXkiLCJjYXN0U2luZ2xlUmF5IiwiZHJhd01pbmlNYXAiLCJ1cGRhdGVNaW5pTWFwIiwiZ2FtZSIsImtleXNQcmVzc2VkIiwiZW5hYmxlUG9pbnRlckxvY2siLCJpc0tleVByZXNzZWQiLCJvbktleWRvd24iLCJjb2RlIiwib25LZXl1cCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZXF1ZXN0UG9pbnRlckxvY2siLCJvbk1vdXNlTW92ZSIsImJpbmQiLCJyb3RhdGlvbkNoYW5nZSIsIm1vdmVtZW50WCIsInBsYXllciIsInVwZGF0ZSIsImR0IiwiQXNzZXRMb2FkZXIiLCJhc3luYyIsImFzc2V0cyIsInBhdGgiLCJhc3NldCIsImxvYWRBc3NldCIsInR5cGUiLCJzcGxpdCIsInBvcCIsImxvYWRJbWFnZSIsImxvYWRUZXh0IiwibG9hZEpTT04iLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIm9ubG9hZCIsIm9uZXJyb3IiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJ0ZXh0IiwianNvbiIsIkdhbWVTdGF0ZSIsIm1pbmlNYXAiLCJxdWVyeVNlbGVjdG9yIiwibWluaU1hcE9iamVjdHMiLCJsYXN0VGltZSIsImZvdkhhbGYiLCJudW1SYXlzIiwiY2VpbCIsInNjcmVlbldpZHRoIiwidmlld0Rpc3QiLCJ0YW4iLCJ0d29QSSIsInZpc2libGVTcHJpdGVzIiwidGlja0NvdW50Iiwic3ByaXRlTWFwIiwibWFwSXRlbXMiLCJpdGVtVHlwZXMiLCJkZWJ1Z1NjcmVlbiIsIm1hcFdpZHRoIiwibWFwSGVpZ2h0IiwiZGF5VGltZSIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwiY2xlYXJSZWN0IiwiY29zIiwic2luIiwiY2xvc2VQYXRoIiwiYXNzZXRMb2FkZXIiLCJyZW5kZXJlciIsImNvbnRyb2xsZXIiLCJsb2FkQXNzZXRzIiwic2V0dXAiLCJpbml0U3ByaXRlcyIsInNwcml0ZSIsIml0ZW1UeXBlIiwiZGlzcGxheSIsInZpc2libGUiLCJibG9jayIsImlzQmxvY2tpbmciLCJpeCIsIml5IiwiY2hlY2tDb2xsaXNpb24iLCJmcm9tWCIsImZyb21ZIiwidG9YIiwidG9ZIiwicmFkaXVzIiwiYmxvY2tYIiwiYmxvY2tZIiwiZHgiLCJkeSIsImJsb2NrVG9wIiwiYmxvY2tCb3R0b20iLCJibG9ja0xlZnQiLCJibG9ja1JpZ2h0IiwiY2FzdFJheXMiLCJzdHJpcElkeCIsInJheVNjcmVlblBvcyIsInJheVZpZXdEaXN0Iiwic3FydCIsInJheUFuZ2xlIiwiYXNpbiIsInJpZ2h0IiwidXAiLCJ3YWxsVHlwZSIsImFuZ2xlU2luIiwiYW5nbGVDb3MiLCJkaXN0IiwieFdhbGxIaXQiLCJ5V2FsbEhpdCIsInRleHR1cmVYIiwiZFhWZXIiLCJkWVZlciIsInNsb3BlIiwid2FsbFgiLCJ3YWxsWSIsImRpc3RYIiwiZGlzdFkiLCJkWUhvciIsImRYSG9yIiwiYmxvY2tEaXN0Iiwicm91bmQiLCJzdHlsZUhlaWdodCIsInRleFgiLCJpbWFnZVJlbmRlcmluZyIsImxvb3AiLCJtb3ZlUGxheWVyIiwiZW50aXR5IiwibW92ZVN0ZXAiLCJuZXdYIiwibmV3WSIsInJlbmRlciIsImlubmVyVGV4dCIsInRzIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==